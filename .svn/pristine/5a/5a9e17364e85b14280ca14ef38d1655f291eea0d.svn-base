IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240729085641_initialCreate'
)
BEGIN
    CREATE TABLE [Item] (
        [id] int NOT NULL IDENTITY,
        [item_no] nvarchar(50) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [description_1] nvarchar(255) NOT NULL,
        [description_2] nvarchar(255) NULL,
        [brand] nvarchar(50) NULL,
        [primary_uom] nvarchar(5) NOT NULL,
        [secondary_uom] nvarchar(5) NOT NULL,
        [purchasing_uom] nvarchar(5) NOT NULL,
        [purchase_min_order_qty] int NOT NULL,
        [purchase_multiple_order_qty] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Item] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240729085641_initialCreate'
)
BEGIN
    CREATE TABLE [Lov] (
        [id] int NOT NULL IDENTITY,
        [lov_type] nvarchar(20) NOT NULL,
        [lov_value] nvarchar(20) NOT NULL,
        [lov_label] nvarchar(100) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Lov] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240729085641_initialCreate'
)
BEGIN
    CREATE TABLE [SecondarySupplier] (
        [id] int NOT NULL IDENTITY,
        [supplier_id] int NOT NULL,
        [supplier_no] nvarchar(20) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [supplier_name] nvarchar(100) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SecondarySupplier] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240729085641_initialCreate'
)
BEGIN
    CREATE TABLE [Supplier] (
        [id] int NOT NULL IDENTITY,
        [supplier_no] nvarchar(20) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [supplier_name] nvarchar(100) NOT NULL,
        [service_flag] nvarchar(1) NOT NULL,
        [product_flag] nvarchar(1) NOT NULL,
        [authorised_flag] nvarchar(1) NOT NULL,
        [payment_term] nvarchar(10) NULL,
        [payment_method] nvarchar(10) NULL,
        [default_currency] nvarchar(10) NULL,
        [landed_cost_rule] nvarchar(10) NULL,
        [inco_term] nvarchar(10) NULL,
        [default_freight_method] nvarchar(10) NULL,
        [po_sending_method] nvarchar(10) NULL,
        [intermediary_supplier_no] int NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Supplier] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240729085641_initialCreate'
)
BEGIN
    CREATE TABLE [SupplierItemMapping] (
        [id] int NOT NULL IDENTITY,
        [supplier_id] int NOT NULL,
        [item_id] int NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [supplier_part_no] nvarchar(50) NOT NULL,
        [supplier_material_code] nvarchar(50) NOT NULL,
        [supplier_material_description] nvarchar(255) NOT NULL,
        [default_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SupplierItemMapping] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240729085641_initialCreate'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240729085641_initialCreate', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    DECLARE @var0 sysname;
    SELECT @var0 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Lov]') AND [c].[name] = N'lov_value');
    IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Lov] DROP CONSTRAINT [' + @var0 + '];');
    ALTER TABLE [Lov] ALTER COLUMN [lov_value] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    DECLARE @var1 sysname;
    SELECT @var1 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Lov]') AND [c].[name] = N'lov_type');
    IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Lov] DROP CONSTRAINT [' + @var1 + '];');
    ALTER TABLE [Lov] ALTER COLUMN [lov_type] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    CREATE TABLE [BranchPlant] (
        [id] int NOT NULL IDENTITY,
        [bu_id] int NOT NULL,
        [site_id] int NOT NULL,
        [branch_plant_no] nvarchar(50) NOT NULL,
        [branch_plant_name] nvarchar(100) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_BranchPlant] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    CREATE TABLE [BusinessUnit] (
        [id] int NOT NULL IDENTITY,
        [business_unit_no] nvarchar(50) NOT NULL,
        [business_unit_name] nvarchar(100) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_BusinessUnit] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    CREATE TABLE [Country] (
        [id] int NOT NULL IDENTITY,
        [country_name] nvarchar(50) NOT NULL,
        [country_alpha_code_two] nvarchar(2) NOT NULL,
        [country_alpha_code_three] nvarchar(3) NOT NULL,
        [country_numeric_code] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Country] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    CREATE TABLE [Site] (
        [id] int NOT NULL IDENTITY,
        [site_no] nvarchar(50) NOT NULL,
        [site_name] nvarchar(255) NOT NULL,
        [address_line_1] nvarchar(255) NOT NULL,
        [address_line_2] nvarchar(255) NOT NULL,
        [address_line_3] nvarchar(255) NOT NULL,
        [address_line_4] nvarchar(255) NOT NULL,
        [postal_code] nvarchar(20) NOT NULL,
        [country_id] int NOT NULL,
        [state_province] nvarchar(50) NOT NULL,
        [county] nvarchar(50) NOT NULL,
        [city] nvarchar(50) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Site] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812072449_AddBranchPlantSiteCountry'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240812072449_AddBranchPlantSiteCountry', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240812073240_UpdateCountryNumericCode'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240812073240_UpdateCountryNumericCode', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813053038_VariousChanges'
)
BEGIN
    EXEC sp_rename N'[Supplier].[intermediary_supplier_no]', N'intermediary_supplier_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813053038_VariousChanges'
)
BEGIN
    DECLARE @var2 sysname;
    SELECT @var2 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'supplier_no');
    IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var2 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [supplier_no] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813053038_VariousChanges'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240813053038_VariousChanges', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813083924_AddCustomer'
)
BEGIN
    DECLARE @var3 sysname;
    SELECT @var3 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SecondarySupplier]') AND [c].[name] = N'supplier_no');
    IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [SecondarySupplier] DROP CONSTRAINT [' + @var3 + '];');
    ALTER TABLE [SecondarySupplier] ALTER COLUMN [supplier_no] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813083924_AddCustomer'
)
BEGIN
    CREATE TABLE [Customer] (
        [id] int NOT NULL IDENTITY,
        [customer_no] nvarchar(50) NOT NULL,
        [customer_name] nvarchar(100) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Customer] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813083924_AddCustomer'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240813083924_AddCustomer', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813090657_AddCustomerShipTo'
)
BEGIN
    CREATE TABLE [CustomerShipTo] (
        [id] int NOT NULL IDENTITY,
        [customer_id] int NOT NULL,
        [site_id] int NOT NULL,
        [default_flag] nvarchar(1) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CustomerShipTo] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813090657_AddCustomerShipTo'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240813090657_AddCustomerShipTo', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813143708_AddAgent'
)
BEGIN
    CREATE TABLE [Agent] (
        [id] int NOT NULL IDENTITY,
        [agent_no] nvarchar(50) NOT NULL,
        [agent_name] nvarchar(100) NOT NULL,
        [agent_type] nvarchar(5) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Agent] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240813143708_AddAgent'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240813143708_AddAgent', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240828071943_AddCurrencyAndCurrencyExchange'
)
BEGIN
    CREATE TABLE [Currency] (
        [id] int NOT NULL IDENTITY,
        [currency] nvarchar(5) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Currency] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240828071943_AddCurrencyAndCurrencyExchange'
)
BEGIN
    CREATE TABLE [CurrencyExchange] (
        [id] int NOT NULL IDENTITY,
        [base_currency_id] nvarchar(5) NOT NULL,
        [currency_id] nvarchar(5) NOT NULL,
        [exchange_rate] decimal(10,4) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240828071943_AddCurrencyAndCurrencyExchange'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240828071943_AddCurrencyAndCurrencyExchange', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240908093818_AddCustomView'
)
BEGIN
    CREATE TABLE [CustomView] (
        [id] int NOT NULL IDENTITY,
        [custom_view_type] nvarchar(20) NOT NULL,
        [custom_view_name] nvarchar(30) NOT NULL,
        [full_flag] nvarchar(1) NOT NULL,
        [default_flag] nvarchar(1) NOT NULL,
        [private_flag] nvarchar(1) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [user_id] nvarchar(50) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CustomView] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240908093818_AddCustomView'
)
BEGIN
    CREATE TABLE [CustomViewAttributes] (
        [id] int NOT NULL IDENTITY,
        [custom_view_id] int NOT NULL,
        [attribute] nvarchar(50) NOT NULL,
        [attribute_type] nvarchar(max) NOT NULL,
        [seq_no] int NOT NULL,
        [column_freeze_flag] nvarchar(max) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CustomViewAttributes] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240908093818_AddCustomView'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240908093818_AddCustomView', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025525_AddPort'
)
BEGIN
    CREATE TABLE [Ports] (
        [id] int NOT NULL IDENTITY,
        [port_no] nvarchar(50) NOT NULL,
        [port_name] nvarchar(100) NOT NULL,
        [country_code] nvarchar(5) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Ports] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025525_AddPort'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240912025525_AddPort', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025614_AddPurchaseOrderAndFileTracking'
)
BEGIN
    CREATE TABLE [FilesTracking] (
        [id] int NOT NULL IDENTITY,
        [file_type] nvarchar(10) NOT NULL,
        [file_name] nvarchar(100) NOT NULL,
        [upload_source] nvarchar(100) NOT NULL,
        [url_path] nvarchar(255) NOT NULL,
        [file_size] decimal(5,2) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_FilesTracking] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025614_AddPurchaseOrderAndFileTracking'
)
BEGIN
    CREATE TABLE [PoDetails] (
        [id] int NOT NULL IDENTITY,
        [po_header_id] int NOT NULL,
        [line_no] int NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [item_id] int NOT NULL,
        [po_item_description] int NOT NULL,
        [qty] int NOT NULL,
        [uom] int NOT NULL,
        [supplier_item_mapping_id] int NOT NULL,
        [ship_to_bp_id] int NOT NULL,
        [unit_cost] int NOT NULL,
        [line_discount] int NOT NULL,
        [cost_rule] nvarchar(max) NOT NULL,
        [secondary_supplier_id] int NOT NULL,
        [supplier_acknowledgement_no] int NULL,
        [instruction_to_supplier] nvarchar(255) NULL,
        [internal_reference] nvarchar(255) NULL,
        [notes_to_warehouse] nvarchar(255) NULL,
        [requested_date] datetime2 NULL,
        [quoted_ex_fac_date_earliest] datetime2 NULL,
        [quoted_ex_fac_date_latest] datetime2 NULL,
        [ack_ex_fac_date] datetime2 NULL,
        [forecast_ex_wh_date] datetime2 NULL,
        [collection_date] datetime2 NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PoDetails] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025614_AddPurchaseOrderAndFileTracking'
)
BEGIN
    CREATE TABLE [PoFiles] (
        [id] int NOT NULL IDENTITY,
        [po_header_id] int NOT NULL,
        [file_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PoFiles] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025614_AddPurchaseOrderAndFileTracking'
)
BEGIN
    CREATE TABLE [PoHeaders] (
        [id] int NOT NULL IDENTITY,
        [po_no] nvarchar(11) NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [po_type] nvarchar(3) NOT NULL,
        [po_date] datetime2 NOT NULL,
        [business_unit_id] int NOT NULL,
        [issuing_branch_plant_id] int NOT NULL,
        [supplier_id] int NOT NULL,
        [intermediary_supplier_id] int NOT NULL,
        [secondary_supplier_id] int NOT NULL,
        [ship_to_branch_plant_id] int NOT NULL,
        [ship_to_site_id] int NOT NULL,
        [forwarder_id] int NOT NULL,
        [sales_order_id] int NOT NULL,
        [payment_term] nvarchar(50) NOT NULL,
        [base_currency_id] int NOT NULL,
        [po_currency_id] int NOT NULL,
        [exchange_rate] decimal(5,2) NOT NULL,
        [cost_rule] nvarchar(50) NULL,
        [urgency_code] nvarchar(50) NULL,
        [order_discount] decimal(9,2) NULL,
        [taken_by] nvarchar(255) NULL,
        [internal_remarks] nvarchar(255) NULL,
        [freight_method] nvarchar(50) NULL,
        [self_collect_site_id] int NOT NULL,
        [port_of_discharge_id] int NOT NULL,
        [send_method] nvarchar(50) NULL,
        [quotation_reference] nvarchar(255) NULL,
        [supplier_acknowledgement_no] nvarchar(255) NULL,
        [supplier_marking_reference] nvarchar(255) NULL,
        [notes_to_supplier] nvarchar(255) NULL,
        [requested_date] datetime2 NULL,
        [quoted_ex_fac_date_earliest] datetime2 NULL,
        [quoted_ex_fac_date_latest] datetime2 NULL,
        [ack_ex_fac_date] datetime2 NULL,
        [forecast_ex_wh_date] datetime2 NULL,
        [collection_date] datetime2 NULL,
        [delivery_date] datetime2 NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PoHeaders] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912025614_AddPurchaseOrderAndFileTracking'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240912025614_AddPurchaseOrderAndFileTracking', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912072535_AddSequenceTracking'
)
BEGIN
    CREATE TABLE [SequenceTracking] (
        [id] int NOT NULL IDENTITY,
        [seq_type] nvarchar(10) NOT NULL,
        [year] int NULL,
        [month] int NULL,
        [seq_no] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SequenceTracking] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912072535_AddSequenceTracking'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240912072535_AddSequenceTracking', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912080556_Update-PODetail-po_item_description'
)
BEGIN
    DECLARE @var4 sysname;
    SELECT @var4 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'po_item_description');
    IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var4 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [po_item_description] nvarchar(max) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240912080556_Update-PODetail-po_item_description'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240912080556_Update-PODetail-po_item_description', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240916084400_AddLineTypeAndServiceType'
)
BEGIN
    ALTER TABLE [PoDetails] ADD [line_type] nvarchar(50) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240916084400_AddLineTypeAndServiceType'
)
BEGIN
    ALTER TABLE [PoDetails] ADD [service_type] nvarchar(50) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240916084400_AddLineTypeAndServiceType'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240916084400_AddLineTypeAndServiceType', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240918160646_UpdateFileTypeLenght'
)
BEGIN
    DECLARE @var5 sysname;
    SELECT @var5 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[FilesTracking]') AND [c].[name] = N'file_type');
    IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [FilesTracking] DROP CONSTRAINT [' + @var5 + '];');
    ALTER TABLE [FilesTracking] ALTER COLUMN [file_type] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240918160646_UpdateFileTypeLenght'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240918160646_UpdateFileTypeLenght', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919072331_AddBaseCurrencyIntoBusinessUnit'
)
BEGIN
    ALTER TABLE [BusinessUnit] ADD [base_currency_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919072331_AddBaseCurrencyIntoBusinessUnit'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240919072331_AddBaseCurrencyIntoBusinessUnit', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919073940_AddIncotermsForPoHeader'
)
BEGIN
    ALTER TABLE [PoHeaders] ADD [inco_term] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919073940_AddIncotermsForPoHeader'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240919073940_AddIncotermsForPoHeader', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919100625_UpdateStatusForBusinessUnit'
)
BEGIN
    ALTER TABLE [BusinessUnit] ADD [status_flag] nvarchar(1) NOT NULL DEFAULT N'E';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919100625_UpdateStatusForBusinessUnit'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240919100625_UpdateStatusForBusinessUnit', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    EXEC sp_rename N'[PoHeaders].[inco_term]', N'inco_terms', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    DECLARE @var6 sysname;
    SELECT @var6 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'ship_to_site_id');
    IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var6 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [ship_to_site_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    DECLARE @var7 sysname;
    SELECT @var7 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'ship_to_branch_plant_id');
    IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var7 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [ship_to_branch_plant_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    DECLARE @var8 sysname;
    SELECT @var8 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'secondary_supplier_id');
    IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var8 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [secondary_supplier_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    DECLARE @var9 sysname;
    SELECT @var9 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'sales_order_id');
    IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var9 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [sales_order_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    DECLARE @var10 sysname;
    SELECT @var10 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'forwarder_id');
    IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var10 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [forwarder_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240919101410_UpdatePoHeaderNullable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240919101410_UpdatePoHeaderNullable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240920030832_RemoveLengthForFileType'
)
BEGIN
    DECLARE @var11 sysname;
    SELECT @var11 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[FilesTracking]') AND [c].[name] = N'file_type');
    IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [FilesTracking] DROP CONSTRAINT [' + @var11 + '];');
    ALTER TABLE [FilesTracking] ALTER COLUMN [file_type] nvarchar(max) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240920030832_RemoveLengthForFileType'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240920030832_RemoveLengthForFileType', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240920081405_UpdateNUllablePoHeader'
)
BEGIN
    DECLARE @var12 sysname;
    SELECT @var12 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'self_collect_site_id');
    IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var12 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [self_collect_site_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240920081405_UpdateNUllablePoHeader'
)
BEGIN
    DECLARE @var13 sysname;
    SELECT @var13 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'port_of_discharge_id');
    IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var13 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [port_of_discharge_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240920081405_UpdateNUllablePoHeader'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240920081405_UpdateNUllablePoHeader', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923061139_AddSupplierSelfCollectSite'
)
BEGIN
    CREATE TABLE [SupplierSelfCollectSites] (
        [id] int NOT NULL IDENTITY,
        [supplier_id] int NOT NULL,
        [site_id] int NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SupplierSelfCollectSites] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923061139_AddSupplierSelfCollectSite'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240923061139_AddSupplierSelfCollectSite', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var14 sysname;
    SELECT @var14 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SupplierItemMapping]') AND [c].[name] = N'default_flag');
    IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [SupplierItemMapping] DROP CONSTRAINT [' + @var14 + '];');
    ALTER TABLE [SupplierItemMapping] ALTER COLUMN [default_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var15 sysname;
    SELECT @var15 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'service_flag');
    IF @var15 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var15 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [service_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var16 sysname;
    SELECT @var16 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'product_flag');
    IF @var16 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var16 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [product_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var17 sysname;
    SELECT @var17 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'authorised_flag');
    IF @var17 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var17 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [authorised_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    ALTER TABLE [SecondarySupplier] ADD [default_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    ALTER TABLE [Lov] ADD [default_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var18 sysname;
    SELECT @var18 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomViewAttributes]') AND [c].[name] = N'column_freeze_flag');
    IF @var18 IS NOT NULL EXEC(N'ALTER TABLE [CustomViewAttributes] DROP CONSTRAINT [' + @var18 + '];');
    ALTER TABLE [CustomViewAttributes] ALTER COLUMN [column_freeze_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var19 sysname;
    SELECT @var19 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomView]') AND [c].[name] = N'private_flag');
    IF @var19 IS NOT NULL EXEC(N'ALTER TABLE [CustomView] DROP CONSTRAINT [' + @var19 + '];');
    ALTER TABLE [CustomView] ALTER COLUMN [private_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var20 sysname;
    SELECT @var20 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomView]') AND [c].[name] = N'full_flag');
    IF @var20 IS NOT NULL EXEC(N'ALTER TABLE [CustomView] DROP CONSTRAINT [' + @var20 + '];');
    ALTER TABLE [CustomView] ALTER COLUMN [full_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var21 sysname;
    SELECT @var21 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomView]') AND [c].[name] = N'default_flag');
    IF @var21 IS NOT NULL EXEC(N'ALTER TABLE [CustomView] DROP CONSTRAINT [' + @var21 + '];');
    ALTER TABLE [CustomView] ALTER COLUMN [default_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    DECLARE @var22 sysname;
    SELECT @var22 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerShipTo]') AND [c].[name] = N'default_flag');
    IF @var22 IS NOT NULL EXEC(N'ALTER TABLE [CustomerShipTo] DROP CONSTRAINT [' + @var22 + '];');
    ALTER TABLE [CustomerShipTo] ALTER COLUMN [default_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240923090734_UpdateTypeOfFlag'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240923090734_UpdateTypeOfFlag', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240924065311_UpdateIntermidarySupplier'
)
BEGIN
    CREATE TABLE [CustomerSoldTo] (
        [id] int NOT NULL IDENTITY,
        [customer_id] int NOT NULL,
        [site_id] int NOT NULL,
        [default_flag] bit NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CustomerSoldTo] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240924065311_UpdateIntermidarySupplier'
)
BEGIN
    CREATE TABLE [IntermediarySupplier] (
        [id] int NOT NULL IDENTITY,
        [supplier_id] int NOT NULL,
        [int_supplier_id] int NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [default_flag] bit NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_IntermediarySupplier] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240924065311_UpdateIntermidarySupplier'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240924065311_UpdateIntermidarySupplier', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    DECLARE @var23 sysname;
    SELECT @var23 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'intermediary_supplier_id');
    IF @var23 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var23 + '];');
    ALTER TABLE [Supplier] DROP COLUMN [intermediary_supplier_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    DECLARE @var24 sysname;
    SELECT @var24 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Country]') AND [c].[name] = N'country_numeric_code');
    IF @var24 IS NOT NULL EXEC(N'ALTER TABLE [Country] DROP CONSTRAINT [' + @var24 + '];');
    ALTER TABLE [Country] DROP COLUMN [country_numeric_code];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    ALTER TABLE [Supplier] ADD [group_supplier_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    ALTER TABLE [Supplier] ADD [registered_site_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    ALTER TABLE [Country] ADD [continent] nvarchar(25) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    ALTER TABLE [Country] ADD [country_idd] nvarchar(3) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    ALTER TABLE [Country] ADD [country_long_name] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925014920_UpdateCountryAndSupplier'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240925014920_UpdateCountryAndSupplier', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925030930_AddStatusFlagForPort'
)
BEGIN
    ALTER TABLE [Ports] ADD [status_flag] nvarchar(1) NOT NULL DEFAULT N'E';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925030930_AddStatusFlagForPort'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240925030930_AddStatusFlagForPort', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925092728_UpadteNewMappingTable'
)
BEGIN
    ALTER TABLE [Customer] ADD [bill_to_site_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925092728_UpadteNewMappingTable'
)
BEGIN
    ALTER TABLE [BusinessUnit] ADD [registered_site_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925092728_UpadteNewMappingTable'
)
BEGIN
    CREATE TABLE [AgentSites] (
        [id] int NOT NULL IDENTITY,
        [agent_id] int NOT NULL,
        [site_id] int NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_AgentSites] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925092728_UpadteNewMappingTable'
)
BEGIN
    CREATE TABLE [SitePurposes] (
        [id] int NOT NULL IDENTITY,
        [site_id] int NOT NULL,
        [purpose] nvarchar(50) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SitePurposes] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925092728_UpadteNewMappingTable'
)
BEGIN
    CREATE TABLE [SupplierGroups] (
        [id] int NOT NULL IDENTITY,
        [group_supplier_no] nvarchar(50) NOT NULL,
        [group_supplier_name] nvarchar(100) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SupplierGroups] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240925092728_UpadteNewMappingTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240925092728_UpadteNewMappingTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240926081846_BusinessUnitRemoveToCompany'
)
BEGIN
    DROP TABLE [BusinessUnit];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240926081846_BusinessUnitRemoveToCompany'
)
BEGIN
    EXEC sp_rename N'[PoHeaders].[business_unit_id]', N'company_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240926081846_BusinessUnitRemoveToCompany'
)
BEGIN
    CREATE TABLE [Company] (
        [id] int NOT NULL IDENTITY,
        [company_no] nvarchar(50) NOT NULL,
        [company_name] nvarchar(100) NOT NULL,
        [base_currency_id] int NULL,
        [registered_site_id] int NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Company] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20240926081846_BusinessUnitRemoveToCompany'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20240926081846_BusinessUnitRemoveToCompany', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002061103_UpdateNUllAbleFieldForSupplierItemMapping'
)
BEGIN
    DECLARE @var25 sysname;
    SELECT @var25 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SupplierItemMapping]') AND [c].[name] = N'supplier_part_no');
    IF @var25 IS NOT NULL EXEC(N'ALTER TABLE [SupplierItemMapping] DROP CONSTRAINT [' + @var25 + '];');
    ALTER TABLE [SupplierItemMapping] ALTER COLUMN [supplier_part_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002061103_UpdateNUllAbleFieldForSupplierItemMapping'
)
BEGIN
    DECLARE @var26 sysname;
    SELECT @var26 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SupplierItemMapping]') AND [c].[name] = N'supplier_material_description');
    IF @var26 IS NOT NULL EXEC(N'ALTER TABLE [SupplierItemMapping] DROP CONSTRAINT [' + @var26 + '];');
    ALTER TABLE [SupplierItemMapping] ALTER COLUMN [supplier_material_description] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002061103_UpdateNUllAbleFieldForSupplierItemMapping'
)
BEGIN
    DECLARE @var27 sysname;
    SELECT @var27 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SupplierItemMapping]') AND [c].[name] = N'supplier_material_code');
    IF @var27 IS NOT NULL EXEC(N'ALTER TABLE [SupplierItemMapping] DROP CONSTRAINT [' + @var27 + '];');
    ALTER TABLE [SupplierItemMapping] ALTER COLUMN [supplier_material_code] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002061103_UpdateNUllAbleFieldForSupplierItemMapping'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241002061103_UpdateNUllAbleFieldForSupplierItemMapping', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002092346_UpdateSecondarySupplier'
)
BEGIN
    EXEC sp_rename N'[SecondarySupplier].[supplier_no]', N'sec_supplier_no', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002092346_UpdateSecondarySupplier'
)
BEGIN
    EXEC sp_rename N'[SecondarySupplier].[supplier_name]', N'sec_supplier_name', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241002092346_UpdateSecondarySupplier'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241002092346_UpdateSecondarySupplier', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var28 sysname;
    SELECT @var28 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'state_province');
    IF @var28 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var28 + '];');
    ALTER TABLE [Site] ALTER COLUMN [state_province] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var29 sysname;
    SELECT @var29 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'postal_code');
    IF @var29 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var29 + '];');
    ALTER TABLE [Site] ALTER COLUMN [postal_code] nvarchar(20) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var30 sysname;
    SELECT @var30 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'county');
    IF @var30 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var30 + '];');
    ALTER TABLE [Site] ALTER COLUMN [county] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var31 sysname;
    SELECT @var31 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'country_id');
    IF @var31 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var31 + '];');
    ALTER TABLE [Site] ALTER COLUMN [country_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var32 sysname;
    SELECT @var32 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'city');
    IF @var32 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var32 + '];');
    ALTER TABLE [Site] ALTER COLUMN [city] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var33 sysname;
    SELECT @var33 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'address_line_4');
    IF @var33 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var33 + '];');
    ALTER TABLE [Site] ALTER COLUMN [address_line_4] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var34 sysname;
    SELECT @var34 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'address_line_3');
    IF @var34 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var34 + '];');
    ALTER TABLE [Site] ALTER COLUMN [address_line_3] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var35 sysname;
    SELECT @var35 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'address_line_2');
    IF @var35 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var35 + '];');
    ALTER TABLE [Site] ALTER COLUMN [address_line_2] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    DECLARE @var36 sysname;
    SELECT @var36 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Site]') AND [c].[name] = N'address_line_1');
    IF @var36 IS NOT NULL EXEC(N'ALTER TABLE [Site] DROP CONSTRAINT [' + @var36 + '];');
    ALTER TABLE [Site] ALTER COLUMN [address_line_1] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003072854_UpdateNullableForSite'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241003072854_UpdateNullableForSite', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    DECLARE @var37 sysname;
    SELECT @var37 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Ports]') AND [c].[name] = N'country_code');
    IF @var37 IS NOT NULL EXEC(N'ALTER TABLE [Ports] DROP CONSTRAINT [' + @var37 + '];');
    ALTER TABLE [Ports] DROP COLUMN [country_code];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    EXEC sp_rename N'[Currency].[currency]', N'currency_code', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    ALTER TABLE [Ports] ADD [country_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    ALTER TABLE [PoDetails] ADD [open_qty] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    DECLARE @var38 sysname;
    SELECT @var38 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CurrencyExchange]') AND [c].[name] = N'currency_id');
    IF @var38 IS NOT NULL EXEC(N'ALTER TABLE [CurrencyExchange] DROP CONSTRAINT [' + @var38 + '];');
    ALTER TABLE [CurrencyExchange] ALTER COLUMN [currency_id] int NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    DECLARE @var39 sysname;
    SELECT @var39 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CurrencyExchange]') AND [c].[name] = N'base_currency_id');
    IF @var39 IS NOT NULL EXEC(N'ALTER TABLE [CurrencyExchange] DROP CONSTRAINT [' + @var39 + '];');
    ALTER TABLE [CurrencyExchange] ALTER COLUMN [base_currency_id] int NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    ALTER TABLE [Currency] ADD [currency_description] nvarchar(100) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    CREATE TABLE [AsnDetails] (
        [id] int NOT NULL IDENTITY,
        [asn_header_id] int NOT NULL,
        [line_no] int NOT NULL,
        [po_detail_id] int NOT NULL,
        [Type] nvarchar(2) NOT NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [unit_cost] int NOT NULL,
        [country_of_origin_id] int NULL,
        [notes_to_warehouse] nvarchar(255) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_AsnDetails] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    CREATE TABLE [AsnHeaders] (
        [id] int NOT NULL IDENTITY,
        [asn_no] nvarchar(11) NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [issuing_branch_plant_id] int NOT NULL,
        [ship_to_branch_plant_id] int NOT NULL,
        [supplier_id] int NOT NULL,
        [inbound_shipment_id] int NULL,
        [forecast_ex_wh_date] datetime2 NULL,
        [invoice_no] nvarchar(20) NOT NULL,
        [invoice_currency_id] int NOT NULL,
        [invoice_amt] decimal(9,2) NOT NULL,
        [total_asn_amt] decimal(11,2) NOT NULL,
        [invoice_exchange_rate] decimal(9,4) NULL,
        [internal_remarks] nvarchar(255) NULL,
        [notes_to_cargo_team] nvarchar(255) NOT NULL,
        [total_packages] int NULL,
        [total_gross_weight] decimal(8,2) NULL,
        [volume] decimal(8,2) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_AsnHeaders] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    CREATE TABLE [InboundShipments] (
        [id] int NOT NULL IDENTITY,
        [inbound_shipment_no] nvarchar(11) NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [issuing_branch_plant_id] int NOT NULL,
        [freight_method] nvarchar(max) NOT NULL,
        [shipment_arranged_supplier_flag] bit NOT NULL,
        [incoterm] nvarchar(max) NOT NULL,
        [cargo_ready_date] datetime2 NOT NULL,
        [port_of_loading_etd] datetime2 NOT NULL,
        [port_of_discharge_eta] datetime2 NOT NULL,
        [cargo_description] nvarchar(max) NOT NULL,
        [country_of_loading_id] int NOT NULL,
        [port_of_loading_id] int NOT NULL,
        [country_of_discharge_id] int NOT NULL,
        [port_of_discharge_id] int NOT NULL,
        [bl_awb_total_packages] int NULL,
        [bl_awb_total_gross_weight] decimal(8,2) NULL,
        [bl_awb_volume] decimal(8,2) NULL,
        [bl_awb_no] nvarchar(50) NOT NULL,
        [vessel_flight_no] nvarchar(50) NOT NULL,
        [connecting_vessel_flight_no] nvarchar(50) NOT NULL,
        [notice_of_arrival_date] datetime2 NULL,
        [import_permit_no] nvarchar(50) NULL,
        [internal_remarks] nvarchar(255) NULL,
        [forwarder_agent_id] int NULL,
        [forwarder_invoice_no] nvarchar(50) NULL,
        [forwarder_invoice_amt] decimal(8,2) NULL,
        [shipping_agent_id] int NULL,
        [shipping_invoice_no] nvarchar(50) NULL,
        [shipping_invoice_amt] decimal(8,2) NULL,
        [insurance_agent_id] int NULL,
        [bl_awb_cargo_description] nvarchar(255) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InboundShipments] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003103339_AddTableForAsnAndInboundShipment'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241003103339_AddTableForAsnAndInboundShipment', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003104000_UpdateBranchPlantCompany'
)
BEGIN
    EXEC sp_rename N'[BranchPlant].[bu_id]', N'company_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241003104000_UpdateBranchPlantCompany'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241003104000_UpdateBranchPlantCompany', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    EXEC sp_rename N'[AsnDetails].[Type]', N'status_flag', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    DECLARE @var40 sysname;
    SELECT @var40 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'incoterm');
    IF @var40 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var40 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [incoterm] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    DECLARE @var41 sysname;
    SELECT @var41 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'freight_method');
    IF @var41 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var41 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [freight_method] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    DECLARE @var42 sysname;
    SELECT @var42 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'cargo_description');
    IF @var42 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var42 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [cargo_description] nvarchar(255) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    DECLARE @var43 sysname;
    SELECT @var43 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'asn_no');
    IF @var43 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var43 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [asn_no] nvarchar(12) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [estimated_putaway_date] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [received_date] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241007082535_AddColumnForASN'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241007082535_AddColumnForASN', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008033456_UpdateLenghtOfNoAndAddUOM'
)
BEGIN
    DECLARE @var44 sysname;
    SELECT @var44 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'po_no');
    IF @var44 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var44 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [po_no] nvarchar(15) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008033456_UpdateLenghtOfNoAndAddUOM'
)
BEGIN
    DECLARE @var45 sysname;
    SELECT @var45 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'asn_no');
    IF @var45 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var45 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [asn_no] nvarchar(15) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008033456_UpdateLenghtOfNoAndAddUOM'
)
BEGIN
    ALTER TABLE [AsnDetails] ADD [uom] nvarchar(5) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008033456_UpdateLenghtOfNoAndAddUOM'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241008033456_UpdateLenghtOfNoAndAddUOM', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008061420_UpdateDataTypeOfSupplierAcknowledgementNo'
)
BEGIN
    DECLARE @var46 sysname;
    SELECT @var46 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'supplier_acknowledgement_no');
    IF @var46 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var46 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [supplier_acknowledgement_no] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008061420_UpdateDataTypeOfSupplierAcknowledgementNo'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241008061420_UpdateDataTypeOfSupplierAcknowledgementNo', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008084443_AddContainerTable'
)
BEGIN
    CREATE TABLE [Containers] (
        [id] int NOT NULL IDENTITY,
        [inbound_shipment_id] int NULL,
        [container_no] nvarchar(20) NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [shipment_type] nvarchar(50) NOT NULL,
        [seal_no] nvarchar(20) NULL,
        [weight] decimal(8,2) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Containers] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008084443_AddContainerTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241008084443_AddContainerTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008085049_AddAsnFileTable'
)
BEGIN
    CREATE TABLE [AsnFiles] (
        [id] int NOT NULL IDENTITY,
        [asn_header_id] int NOT NULL,
        [file_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_AsnFiles] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241008085049_AddAsnFileTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241008085049_AddAsnFileTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241009092139_IncreaseLengthOfSHIBNumber'
)
BEGIN
    DECLARE @var47 sysname;
    SELECT @var47 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'inbound_shipment_no');
    IF @var47 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var47 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [inbound_shipment_no] nvarchar(20) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241009092139_IncreaseLengthOfSHIBNumber'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241009092139_IncreaseLengthOfSHIBNumber', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010045446_UpdateDataTypeOfUOMAndAddDocumentTypeForFileTracking'
)
BEGIN
    DECLARE @var48 sysname;
    SELECT @var48 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'uom');
    IF @var48 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var48 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [uom] nvarchar(5) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010045446_UpdateDataTypeOfUOMAndAddDocumentTypeForFileTracking'
)
BEGIN
    ALTER TABLE [FilesTracking] ADD [document_type] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010045446_UpdateDataTypeOfUOMAndAddDocumentTypeForFileTracking'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241010045446_UpdateDataTypeOfUOMAndAddDocumentTypeForFileTracking', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    DECLARE @var49 sysname;
    SELECT @var49 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'inbound_shipment_id');
    IF @var49 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var49 + '];');
    EXEC(N'UPDATE [Containers] SET [inbound_shipment_id] = 0 WHERE [inbound_shipment_id] IS NULL');
    ALTER TABLE [Containers] ALTER COLUMN [inbound_shipment_id] int NOT NULL;
    ALTER TABLE [Containers] ADD DEFAULT 0 FOR [inbound_shipment_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE INDEX [IX_SupplierItemMapping_supplier_id_item_id_supplier_part_no] ON [SupplierItemMapping] ([supplier_id], [item_id], [supplier_part_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_SupplierGroups_group_supplier_no] ON [SupplierGroups] ([group_supplier_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Supplier_supplier_no] ON [Supplier] ([supplier_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Site_site_no] ON [Site] ([site_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Ports_port_no] ON [Ports] ([port_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_PoHeaders_po_no] ON [PoHeaders] ([po_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Item_item_no] ON [Item] ([item_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_InboundShipments_inbound_shipment_no] ON [InboundShipments] ([inbound_shipment_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Customer_customer_no] ON [Customer] ([customer_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Country_country_alpha_code_two_country_alpha_code_three] ON [Country] ([country_alpha_code_two], [country_alpha_code_three]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Containers_inbound_shipment_id_container_no] ON [Containers] ([inbound_shipment_id], [container_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Company_company_no] ON [Company] ([company_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_BranchPlant_branch_plant_no] ON [BranchPlant] ([branch_plant_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_AsnHeaders_asn_no] ON [AsnHeaders] ([asn_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Agent_agent_no] ON [Agent] ([agent_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241010074119_AddIndex'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241010074119_AddIndex', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241018090019_UpdateUnitCostToDecimal'
)
BEGIN
    DECLARE @var50 sysname;
    SELECT @var50 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'unit_cost');
    IF @var50 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var50 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [unit_cost] decimal(6,2) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241018090019_UpdateUnitCostToDecimal'
)
BEGIN
    DECLARE @var51 sysname;
    SELECT @var51 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'unit_cost');
    IF @var51 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var51 + '];');
    ALTER TABLE [AsnDetails] ALTER COLUMN [unit_cost] decimal(6,2) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241018090019_UpdateUnitCostToDecimal'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241018090019_UpdateUnitCostToDecimal', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241022063956_AddTotalAmtBaseAndTotalAmtForeign'
)
BEGIN
    ALTER TABLE [PoHeaders] ADD [total_amt_base] decimal(9,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241022063956_AddTotalAmtBaseAndTotalAmtForeign'
)
BEGIN
    ALTER TABLE [PoHeaders] ADD [total_amt_foreign] decimal(11,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241022063956_AddTotalAmtBaseAndTotalAmtForeign'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241022063956_AddTotalAmtBaseAndTotalAmtForeign', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    DROP INDEX [IX_Containers_inbound_shipment_id_container_no] ON [Containers];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    EXEC sp_rename N'[InboundShipments].[issuing_branch_plant_id]', N'branch_plant_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    DECLARE @var52 sysname;
    SELECT @var52 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'inbound_shipment_id');
    IF @var52 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var52 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [inbound_shipment_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    ALTER TABLE [Containers] ADD [inbound_shipment_request_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [inbound_shipment_request_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    CREATE TABLE [InboundShipmentFiles] (
        [id] int NOT NULL IDENTITY,
        [inbound_shipment_id] int NOT NULL,
        [file_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InboundShipmentFiles] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    CREATE TABLE [InboundShipmentRequests] (
        [id] int NOT NULL IDENTITY,
        [inbound_shipment_request_no] nvarchar(15) NOT NULL,
        [inbound_shipment_id] int NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [freight_method] nvarchar(50) NOT NULL,
        [shipment_arranged_supplier_flag] bit NOT NULL,
        [incoterm] nvarchar(50) NOT NULL,
        [cargo_ready_date] datetime2 NULL,
        [port_of_loading_etd] datetime2 NULL,
        [port_of_discharge_eta] datetime2 NULL,
        [cargo_description] nvarchar(255) NOT NULL,
        [country_of_loading_id] int NULL,
        [port_of_loading_id] int NULL,
        [country_of_discharge_id] int NULL,
        [port_of_discharge_id] int NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InboundShipmentRequests] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    EXEC(N'CREATE UNIQUE INDEX [IX_Containers_inbound_shipment_id_inbound_shipment_request_id_container_no] ON [Containers] ([inbound_shipment_id], [inbound_shipment_request_id], [container_no]) WHERE [inbound_shipment_id] IS NOT NULL AND [inbound_shipment_request_id] IS NOT NULL');
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241023102257_AddTableForInboundShipmentRequest'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241023102257_AddTableForInboundShipmentRequest', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241024083219_UpdateASNBranchPlantCol'
)
BEGIN
    EXEC sp_rename N'[AsnHeaders].[issuing_branch_plant_id]', N'branch_plant_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241024083219_UpdateASNBranchPlantCol'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241024083219_UpdateASNBranchPlantCol', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    DECLARE @var53 sysname;
    SELECT @var53 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'cargo_description');
    IF @var53 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var53 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [cargo_description];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    DECLARE @var54 sysname;
    SELECT @var54 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'shipment_arranged_supplier_flag');
    IF @var54 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var54 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [shipment_arranged_supplier_flag];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    DECLARE @var55 sysname;
    SELECT @var55 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'shipment_arranged_supplier_flag');
    IF @var55 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var55 + '];');
    ALTER TABLE [InboundShipmentRequests] DROP COLUMN [shipment_arranged_supplier_flag];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    ALTER TABLE [PoDetails] ADD [extended_cost] decimal(9,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [branch_plant_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [shipment_arranged_supplier_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    ALTER TABLE [AsnDetails] ADD [extended_cost] decimal(9,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029061252_AddedExtendedCost'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241029061252_AddedExtendedCost', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029065944_IcreaseLengthOfInternalRemark'
)
BEGIN
    DECLARE @var56 sysname;
    SELECT @var56 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'internal_remarks');
    IF @var56 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var56 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [internal_remarks] nvarchar(1024) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029065944_IcreaseLengthOfInternalRemark'
)
BEGIN
    DECLARE @var57 sysname;
    SELECT @var57 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'internal_remarks');
    IF @var57 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var57 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [internal_remarks] nvarchar(1024) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029065944_IcreaseLengthOfInternalRemark'
)
BEGIN
    DECLARE @var58 sysname;
    SELECT @var58 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'internal_remarks');
    IF @var58 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var58 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [internal_remarks] nvarchar(1024) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029065944_IcreaseLengthOfInternalRemark'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241029065944_IcreaseLengthOfInternalRemark', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029092641_UpdateForExchangeRate'
)
BEGIN
    DECLARE @var59 sysname;
    SELECT @var59 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'exchange_rate');
    IF @var59 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var59 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [exchange_rate] decimal(13,7) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029092641_UpdateForExchangeRate'
)
BEGIN
    DECLARE @var60 sysname;
    SELECT @var60 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'uom');
    IF @var60 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var60 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [uom] nvarchar(5) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241029092641_UpdateForExchangeRate'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241029092641_UpdateForExchangeRate', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030035731_Updatedate_extended_data_Lov'
)
BEGIN
    ALTER TABLE [Lov] ADD [extended_data_1] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030035731_Updatedate_extended_data_Lov'
)
BEGIN
    ALTER TABLE [Lov] ADD [extended_data_2] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030035731_Updatedate_extended_data_Lov'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241030035731_Updatedate_extended_data_Lov', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030041535_RevertCargoDescription'
)
BEGIN
    ALTER TABLE [InboundShipments] ADD [cargo_description] nvarchar(255) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030041535_RevertCargoDescription'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241030041535_RevertCargoDescription', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030042434_RevertCargoDescriptionAndNullField'
)
BEGIN
    DECLARE @var61 sysname;
    SELECT @var61 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'vessel_flight_no');
    IF @var61 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var61 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [vessel_flight_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030042434_RevertCargoDescriptionAndNullField'
)
BEGIN
    DECLARE @var62 sysname;
    SELECT @var62 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'connecting_vessel_flight_no');
    IF @var62 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var62 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [connecting_vessel_flight_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030042434_RevertCargoDescriptionAndNullField'
)
BEGIN
    DECLARE @var63 sysname;
    SELECT @var63 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'bl_awb_no');
    IF @var63 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var63 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [bl_awb_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030042434_RevertCargoDescriptionAndNullField'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241030042434_RevertCargoDescriptionAndNullField', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030085711_UpdateNoteToCargoTeamToNullableField'
)
BEGIN
    DECLARE @var64 sysname;
    SELECT @var64 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'notes_to_cargo_team');
    IF @var64 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var64 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [notes_to_cargo_team] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241030085711_UpdateNoteToCargoTeamToNullableField'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241030085711_UpdateNoteToCargoTeamToNullableField', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241031100527_addCustomviewFilter'
)
BEGIN
    ALTER TABLE [CustomViewAttributes] ADD [sort_direction] nvarchar(1) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241031100527_addCustomviewFilter'
)
BEGIN
    CREATE TABLE [CustomViewFilters] (
        [id] int NOT NULL IDENTITY,
        [custom_view_id] int NULL,
        [filter] nvarchar(50) NOT NULL,
        [filter_value] nvarchar(1024) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CustomViewFilters] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241031100527_addCustomviewFilter'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241031100527_addCustomviewFilter', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    DECLARE @var65 sysname;
    SELECT @var65 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'bl_awb_cargo_description');
    IF @var65 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var65 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [bl_awb_cargo_description];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    DECLARE @var66 sysname;
    SELECT @var66 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'bl_awb_no');
    IF @var66 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var66 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [bl_awb_no];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    DECLARE @var67 sysname;
    SELECT @var67 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'bl_awb_total_gross_weight');
    IF @var67 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var67 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [bl_awb_total_gross_weight];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    DECLARE @var68 sysname;
    SELECT @var68 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'bl_awb_total_packages');
    IF @var68 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var68 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [bl_awb_total_packages];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    DECLARE @var69 sysname;
    SELECT @var69 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'bl_awb_volume');
    IF @var69 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var69 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [bl_awb_volume];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    ALTER TABLE [Containers] ADD [inbound_shipment_blawb_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    CREATE TABLE [InboundShipmentBLAWBs] (
        [id] int NOT NULL IDENTITY,
        [inbound_shipment_id] int NOT NULL,
        [supplier_id] int NOT NULL,
        [bl_awb_no] nvarchar(50) NOT NULL,
        [bl_awb_total_packages] int NULL,
        [bl_awb_total_gross_weight] decimal(8,2) NULL,
        [bl_awb_volume] decimal(8,2) NULL,
        [bl_awb_cargo_description] nvarchar(255) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InboundShipmentBLAWBs] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241104011851_AddTableInboundShipmentBLAWB'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241104011851_AddTableInboundShipmentBLAWB', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241105043532_UpdateLineDiscountAndInvoiceExRateToDecimal'
)
BEGIN
    DECLARE @var70 sysname;
    SELECT @var70 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'line_discount');
    IF @var70 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var70 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [line_discount] decimal(6,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241105043532_UpdateLineDiscountAndInvoiceExRateToDecimal'
)
BEGIN
    DECLARE @var71 sysname;
    SELECT @var71 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'invoice_exchange_rate');
    IF @var71 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var71 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [invoice_exchange_rate] decimal(13,7) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241105043532_UpdateLineDiscountAndInvoiceExRateToDecimal'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241105043532_UpdateLineDiscountAndInvoiceExRateToDecimal', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241105100003_UpdateSomeDateFieldToNullable'
)
BEGIN
    DECLARE @var72 sysname;
    SELECT @var72 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'port_of_loading_etd');
    IF @var72 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var72 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [port_of_loading_etd] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241105100003_UpdateSomeDateFieldToNullable'
)
BEGIN
    DECLARE @var73 sysname;
    SELECT @var73 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'port_of_discharge_eta');
    IF @var73 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var73 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [port_of_discharge_eta] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241105100003_UpdateSomeDateFieldToNullable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241105100003_UpdateSomeDateFieldToNullable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241106100136_IncreaseLimitLengthOfSupplierPartNo'
)
BEGIN
    DECLARE @var74 sysname;
    SELECT @var74 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'cargo_description');
    IF @var74 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var74 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [cargo_description];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241106100136_IncreaseLimitLengthOfSupplierPartNo'
)
BEGIN
    DROP INDEX [IX_SupplierItemMapping_supplier_id_item_id_supplier_part_no] ON [SupplierItemMapping];
    DECLARE @var75 sysname;
    SELECT @var75 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SupplierItemMapping]') AND [c].[name] = N'supplier_part_no');
    IF @var75 IS NOT NULL EXEC(N'ALTER TABLE [SupplierItemMapping] DROP CONSTRAINT [' + @var75 + '];');
    ALTER TABLE [SupplierItemMapping] ALTER COLUMN [supplier_part_no] nvarchar(100) NULL;
    CREATE INDEX [IX_SupplierItemMapping_supplier_id_item_id_supplier_part_no] ON [SupplierItemMapping] ([supplier_id], [item_id], [supplier_part_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241106100136_IncreaseLimitLengthOfSupplierPartNo'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241106100136_IncreaseLimitLengthOfSupplierPartNo', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241107055511_createApplicationToken'
)
BEGIN
    CREATE TABLE [ApplicationToken] (
        [id] int NOT NULL IDENTITY,
        [application_code] nvarchar(max) NOT NULL,
        [application_name] nvarchar(100) NOT NULL,
        [token_type] nvarchar(50) NOT NULL,
        [token] nvarchar(1024) NULL,
        [issued_date] datetime2 NULL,
        [expiry_date] datetime2 NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ApplicationToken] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241107055511_createApplicationToken'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241107055511_createApplicationToken', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065118_create_Group_table'
)
BEGIN
    CREATE TABLE [Groups] (
        [id] int NOT NULL IDENTITY,
        [group_code] nvarchar(6) NOT NULL,
        [group_description] nvarchar(255) NOT NULL,
        [group_type] nvarchar(2) NOT NULL,
        [level] int NOT NULL,
        [parent_group_id] int NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_Groups] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065118_create_Group_table'
)
BEGIN
    CREATE UNIQUE INDEX [IX_Groups_group_code] ON [Groups] ([group_code]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065118_create_Group_table'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241111065118_create_Group_table', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065631_change_Groups_to_Group'
)
BEGIN
    ALTER TABLE [Groups] DROP CONSTRAINT [PK_Groups];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065631_change_Groups_to_Group'
)
BEGIN
    EXEC sp_rename N'[Groups]', N'Group';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065631_change_Groups_to_Group'
)
BEGIN
    EXEC sp_rename N'[Group].[IX_Groups_group_code]', N'IX_Group_group_code', N'INDEX';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065631_change_Groups_to_Group'
)
BEGIN
    ALTER TABLE [Group] ADD CONSTRAINT [PK_Group] PRIMARY KEY ([id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241111065631_change_Groups_to_Group'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241111065631_change_Groups_to_Group', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241112013541_Group_Parent_group_id_nullable'
)
BEGIN
    DECLARE @var76 sysname;
    SELECT @var76 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Group]') AND [c].[name] = N'parent_group_id');
    IF @var76 IS NOT NULL EXEC(N'ALTER TABLE [Group] DROP CONSTRAINT [' + @var76 + '];');
    ALTER TABLE [Group] ALTER COLUMN [parent_group_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241112013541_Group_Parent_group_id_nullable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241112013541_Group_Parent_group_id_nullable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241113065631_AddAsnHeaderIdToBlAwbTable'
)
BEGIN
    ALTER TABLE [InboundShipmentBLAWBs] ADD [asn_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241113065631_AddAsnHeaderIdToBlAwbTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241113065631_AddAsnHeaderIdToBlAwbTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114021428_AddNewColumnForAsnPortAndISG'
)
BEGIN
    ALTER TABLE [Supplier] ADD [default_country_of_loading_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114021428_AddNewColumnForAsnPortAndISG'
)
BEGIN
    ALTER TABLE [Supplier] ADD [default_port_of_loading_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114021428_AddNewColumnForAsnPortAndISG'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [inbound_shipment_request_group_no] nvarchar(15) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114021428_AddNewColumnForAsnPortAndISG'
)
BEGIN
    ALTER TABLE [Containers] ADD [bay_no] nvarchar(5) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114021428_AddNewColumnForAsnPortAndISG'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [variance_reason] nvarchar(1024) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114021428_AddNewColumnForAsnPortAndISG'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241114021428_AddNewColumnForAsnPortAndISG', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114041515_IncreaseLengthOfAttribute'
)
BEGIN
    DECLARE @var77 sysname;
    SELECT @var77 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomViewAttributes]') AND [c].[name] = N'attribute');
    IF @var77 IS NOT NULL EXEC(N'ALTER TABLE [CustomViewAttributes] DROP CONSTRAINT [' + @var77 + '];');
    ALTER TABLE [CustomViewAttributes] ALTER COLUMN [attribute] nvarchar(255) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114041515_IncreaseLengthOfAttribute'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241114041515_IncreaseLengthOfAttribute', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114102626_RemoveServiceTypeFromPoDetail'
)
BEGIN
    DECLARE @var78 sysname;
    SELECT @var78 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'service_type');
    IF @var78 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var78 + '];');
    ALTER TABLE [PoDetails] DROP COLUMN [service_type];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241114102626_RemoveServiceTypeFromPoDetail'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241114102626_RemoveServiceTypeFromPoDetail', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    DROP INDEX [IX_Containers_inbound_shipment_id_inbound_shipment_request_id_container_no] ON [Containers];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    DECLARE @var79 sysname;
    SELECT @var79 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'inbound_shipment_id');
    IF @var79 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var79 + '];');
    ALTER TABLE [InboundShipmentRequests] DROP COLUMN [inbound_shipment_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    DECLARE @var80 sysname;
    SELECT @var80 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'inbound_shipment_id');
    IF @var80 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var80 + '];');
    ALTER TABLE [Containers] DROP COLUMN [inbound_shipment_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    DECLARE @var81 sysname;
    SELECT @var81 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'inbound_shipment_request_id');
    IF @var81 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var81 + '];');
    ALTER TABLE [Containers] DROP COLUMN [inbound_shipment_request_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    ALTER TABLE [InboundShipments] ADD [forwarder_invoice_currency_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    ALTER TABLE [InboundShipments] ADD [shipping_invoice_currency_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    EXEC(N'CREATE UNIQUE INDEX [IX_Containers_inbound_shipment_blawb_id_container_no] ON [Containers] ([inbound_shipment_blawb_id], [container_no]) WHERE [inbound_shipment_blawb_id] IS NOT NULL');
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241118104930_UpdateRelationshipASN'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241118104930_UpdateRelationshipASN', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    DECLARE @var82 sysname;
    SELECT @var82 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'seal_no');
    IF @var82 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var82 + '];');
    ALTER TABLE [Containers] DROP COLUMN [seal_no];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [detention_date] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [no_of_packages] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [no_of_packages_unloaded] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [received_by] nvarchar(50) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [received_on] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [released_by] nvarchar(50) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [released_on] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [unload_end_on] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [unload_remark] nvarchar(1024) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [unload_start_on] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    ALTER TABLE [Containers] ADD [unloaded_by] nvarchar(50) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241119033745_UpdateContainerTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241119033745_UpdateContainerTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    DECLARE @var83 sysname;
    SELECT @var83 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Company]') AND [c].[name] = N'registered_site_id');
    IF @var83 IS NOT NULL EXEC(N'ALTER TABLE [Company] DROP CONSTRAINT [' + @var83 + '];');
    EXEC(N'UPDATE [Company] SET [registered_site_id] = 0 WHERE [registered_site_id] IS NULL');
    ALTER TABLE [Company] ALTER COLUMN [registered_site_id] int NOT NULL;
    ALTER TABLE [Company] ADD DEFAULT 0 FOR [registered_site_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    DECLARE @var84 sysname;
    SELECT @var84 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Company]') AND [c].[name] = N'base_currency_id');
    IF @var84 IS NOT NULL EXEC(N'ALTER TABLE [Company] DROP CONSTRAINT [' + @var84 + '];');
    EXEC(N'UPDATE [Company] SET [base_currency_id] = 0 WHERE [base_currency_id] IS NULL');
    ALTER TABLE [Company] ALTER COLUMN [base_currency_id] int NOT NULL;
    ALTER TABLE [Company] ADD DEFAULT 0 FOR [base_currency_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    ALTER TABLE [Company] ADD [company_registration_no] nvarchar(50) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    ALTER TABLE [Company] ADD [dormant_flag] nvarchar(1) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    ALTER TABLE [Company] ADD [gst_vat_registration_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    ALTER TABLE [Company] ADD [intercompany_flag] nvarchar(1) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    ALTER TABLE [Company] ADD [parent_group_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    ALTER TABLE [Company] ADD [tax_registration_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241121021315_Update_Company'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241121021315_Update_Company', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126013339_UpdateContainerAddContainerFile'
)
BEGIN
    CREATE TABLE [ContainerFiles] (
        [id] int NOT NULL IDENTITY,
        [container_id] int NOT NULL,
        [container_file_type] nvarchar(max) NOT NULL,
        [file_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ContainerFiles] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126013339_UpdateContainerAddContainerFile'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241126013339_UpdateContainerAddContainerFile', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126024352_AddPackingListAndReceivingTables'
)
BEGIN
    CREATE TABLE [PackingListDetails] (
        [id] int NOT NULL IDENTITY,
        [packing_list_header_id] int NOT NULL,
        [asn_detail_id] int NOT NULL,
        [receiving_detail_id] int NOT NULL,
        [package_no] nvarchar(50) NOT NULL,
        [mixed_carton_no] nvarchar(50) NOT NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [uom] nvarchar(5) NULL,
        [country_of_origin_id] int NOT NULL,
        [no_of_carton] int NOT NULL,
        [unit_per_carton] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PackingListDetails] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126024352_AddPackingListAndReceivingTables'
)
BEGIN
    CREATE TABLE [PackingListHeaders] (
        [id] int NOT NULL IDENTITY,
        [packing_list_no] nvarchar(15) NOT NULL,
        [asn_header_id] int NOT NULL,
        [container_id] int NOT NULL,
        [supplier_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PackingListHeaders] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126024352_AddPackingListAndReceivingTables'
)
BEGIN
    CREATE TABLE [ReceivingDetails] (
        [id] int NOT NULL IDENTITY,
        [receiving_header_id] int NOT NULL,
        [line_no] int NOT NULL,
        [po_detail_id] int NULL,
        [asn_detail_id] int NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [inspected_qty] int NOT NULL,
        [uom] nvarchar(5) NULL,
        [po_uom] nvarchar(5) NULL,
        [package_no] nvarchar(50) NULL,
        [country_of_origin_id] int NULL,
        [supplier_document_type] nvarchar(50) NULL,
        [supplier_document_no] nvarchar(50) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ReceivingDetails] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126024352_AddPackingListAndReceivingTables'
)
BEGIN
    CREATE TABLE [ReceivingFiles] (
        [id] int NOT NULL IDENTITY,
        [receiving_header_id] int NOT NULL,
        [receiving_detail_id] int NOT NULL,
        [file_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ReceivingFiles] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126024352_AddPackingListAndReceivingTables'
)
BEGIN
    CREATE TABLE [ReceivingHeaders] (
        [id] int NOT NULL IDENTITY,
        [receiving_no] nvarchar(15) NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [branch_plant_id] int NOT NULL,
        [supplier_id] int NULL,
        [receiving_from_document_type] nvarchar(2) NOT NULL,
        [container_id] int NOT NULL,
        [received_on] datetime2 NULL,
        [inspector_assigned_on] datetime2 NULL,
        [inspection_start_on] datetime2 NULL,
        [inspection_end_on] datetime2 NULL,
        [inspected_by] nvarchar(50) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ReceivingHeaders] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126024352_AddPackingListAndReceivingTables'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241126024352_AddPackingListAndReceivingTables', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126053244_addSystemKvs'
)
BEGIN
    CREATE TABLE [SystemKvs] (
        [id] int NOT NULL IDENTITY,
        [keyword] nvarchar(200) NOT NULL,
        [varchar_value] nvarchar(500) NULL,
        [number_value] int NULL,
        [date_value] datetime2 NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_SystemKvs] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126053244_addSystemKvs'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241126053244_addSystemKvs', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var85 sysname;
    SELECT @var85 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingDetails]') AND [c].[name] = N'uom');
    IF @var85 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingDetails] DROP CONSTRAINT [' + @var85 + '];');
    EXEC(N'UPDATE [ReceivingDetails] SET [uom] = N'''' WHERE [uom] IS NULL');
    ALTER TABLE [ReceivingDetails] ALTER COLUMN [uom] nvarchar(5) NOT NULL;
    ALTER TABLE [ReceivingDetails] ADD DEFAULT N'' FOR [uom];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var86 sysname;
    SELECT @var86 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListHeaders]') AND [c].[name] = N'supplier_id');
    IF @var86 IS NOT NULL EXEC(N'ALTER TABLE [PackingListHeaders] DROP CONSTRAINT [' + @var86 + '];');
    ALTER TABLE [PackingListHeaders] ALTER COLUMN [supplier_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var87 sysname;
    SELECT @var87 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'uom');
    IF @var87 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var87 + '];');
    EXEC(N'UPDATE [PackingListDetails] SET [uom] = N'''' WHERE [uom] IS NULL');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [uom] nvarchar(5) NOT NULL;
    ALTER TABLE [PackingListDetails] ADD DEFAULT N'' FOR [uom];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var88 sysname;
    SELECT @var88 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'unit_per_carton');
    IF @var88 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var88 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [unit_per_carton] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var89 sysname;
    SELECT @var89 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'receiving_detail_id');
    IF @var89 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var89 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [receiving_detail_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var90 sysname;
    SELECT @var90 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'package_no');
    IF @var90 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var90 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [package_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var91 sysname;
    SELECT @var91 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'no_of_carton');
    IF @var91 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var91 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [no_of_carton] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var92 sysname;
    SELECT @var92 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'mixed_carton_no');
    IF @var92 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var92 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [mixed_carton_no] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var93 sysname;
    SELECT @var93 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'country_of_origin_id');
    IF @var93 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var93 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [country_of_origin_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var94 sysname;
    SELECT @var94 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'asn_detail_id');
    IF @var94 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var94 + '];');
    ALTER TABLE [PackingListDetails] ALTER COLUMN [asn_detail_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var95 sysname;
    SELECT @var95 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'unloaded_by');
    IF @var95 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var95 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [unloaded_by] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var96 sysname;
    SELECT @var96 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'unload_remark');
    IF @var96 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var96 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [unload_remark] nvarchar(1024) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var97 sysname;
    SELECT @var97 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'shipment_type');
    IF @var97 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var97 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [shipment_type] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var98 sysname;
    SELECT @var98 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'released_by');
    IF @var98 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var98 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [released_by] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    DECLARE @var99 sysname;
    SELECT @var99 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'received_by');
    IF @var99 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var99 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [received_by] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241126074739_updateMandatoryColumn'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241126074739_updateMandatoryColumn', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127030438_UpdateCargoReadyDateToOption'
)
BEGIN
    DECLARE @var100 sysname;
    SELECT @var100 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'cargo_ready_date');
    IF @var100 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var100 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [cargo_ready_date] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127030438_UpdateCargoReadyDateToOption'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241127030438_UpdateCargoReadyDateToOption', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127042015_addASNDetailReceivedQty'
)
BEGIN
    ALTER TABLE [AsnDetails] ADD [received_qty] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127042015_addASNDetailReceivedQty'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241127042015_addASNDetailReceivedQty', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127074452_AddAllowDeleteFlagForCustomview'
)
BEGIN
    ALTER TABLE [CustomView] ADD [allow_delete_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127074452_AddAllowDeleteFlagForCustomview'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241127074452_AddAllowDeleteFlagForCustomview', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127081720_UpdateCostFieldSupport4DecimalPlaces'
)
BEGIN
    DECLARE @var101 sysname;
    SELECT @var101 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'unit_cost');
    IF @var101 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var101 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [unit_cost] decimal(8,4) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127081720_UpdateCostFieldSupport4DecimalPlaces'
)
BEGIN
    DECLARE @var102 sysname;
    SELECT @var102 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'line_discount');
    IF @var102 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var102 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [line_discount] decimal(8,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127081720_UpdateCostFieldSupport4DecimalPlaces'
)
BEGIN
    DECLARE @var103 sysname;
    SELECT @var103 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'extended_cost');
    IF @var103 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var103 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [extended_cost] decimal(11,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127081720_UpdateCostFieldSupport4DecimalPlaces'
)
BEGIN
    DECLARE @var104 sysname;
    SELECT @var104 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'unit_cost');
    IF @var104 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var104 + '];');
    ALTER TABLE [AsnDetails] ALTER COLUMN [unit_cost] decimal(8,4) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127081720_UpdateCostFieldSupport4DecimalPlaces'
)
BEGIN
    DECLARE @var105 sysname;
    SELECT @var105 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'extended_cost');
    IF @var105 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var105 + '];');
    ALTER TABLE [AsnDetails] ALTER COLUMN [extended_cost] decimal(11,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241127081720_UpdateCostFieldSupport4DecimalPlaces'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241127081720_UpdateCostFieldSupport4DecimalPlaces', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241128043905_UpdateAllowDeleteFlagDefault'
)
BEGIN
    DECLARE @var106 sysname;
    SELECT @var106 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomView]') AND [c].[name] = N'allow_delete_flag');
    IF @var106 IS NOT NULL EXEC(N'ALTER TABLE [CustomView] DROP CONSTRAINT [' + @var106 + '];');
    ALTER TABLE [CustomView] ADD DEFAULT CAST(1 AS bit) FOR [allow_delete_flag];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241128043905_UpdateAllowDeleteFlagDefault'
)
BEGIN
    UPDATE CustomView SET allow_delete_flag = 1 WHERE allow_delete_flag = 0
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241128043905_UpdateAllowDeleteFlagDefault'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241128043905_UpdateAllowDeleteFlagDefault', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129015444_AddItemUomConversionTable'
)
BEGIN
    DECLARE @var107 sysname;
    SELECT @var107 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingHeaders]') AND [c].[name] = N'container_id');
    IF @var107 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingHeaders] DROP CONSTRAINT [' + @var107 + '];');
    ALTER TABLE [ReceivingHeaders] ALTER COLUMN [container_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129015444_AddItemUomConversionTable'
)
BEGIN
    CREATE TABLE [ItemUomConversion] (
        [id] int NOT NULL IDENTITY,
        [item_id] int NOT NULL,
        [primary_uom] nvarchar(5) NOT NULL,
        [secondary_uom] nvarchar(5) NOT NULL,
        [primary_uom_qty] int NOT NULL,
        [secondary_uom_qty] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ItemUomConversion] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129015444_AddItemUomConversionTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241129015444_AddItemUomConversionTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129033635_AddDefaultCountryAndPortOfDischarge'
)
BEGIN
    ALTER TABLE [Supplier] ADD [default_country_of_discharge_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129033635_AddDefaultCountryAndPortOfDischarge'
)
BEGIN
    ALTER TABLE [Supplier] ADD [default_port_of_discharge_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129033635_AddDefaultCountryAndPortOfDischarge'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241129033635_AddDefaultCountryAndPortOfDischarge', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129084656_ChangeLineDiscountToUnitDiscount'
)
BEGIN
    EXEC sp_rename N'[PoDetails].[line_discount]', N'unit_discount', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241129084656_ChangeLineDiscountToUnitDiscount'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241129084656_ChangeLineDiscountToUnitDiscount', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241130115555_Add_Mapping_Table'
)
BEGIN
    CREATE TABLE [CostCenterCompanyMapping] (
        [id] int NOT NULL IDENTITY,
        [cost_center_id] int NOT NULL,
        [company_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CostCenterCompanyMapping] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241130115555_Add_Mapping_Table'
)
BEGIN
    CREATE TABLE [RevenueCenterCompanyMapping] (
        [id] int NOT NULL IDENTITY,
        [revenue_center_id] int NOT NULL,
        [company_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_RevenueCenterCompanyMapping] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241130115555_Add_Mapping_Table'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241130115555_Add_Mapping_Table', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203064708_IncreaseLenghtOfAgentType'
)
BEGIN
    DECLARE @var108 sysname;
    SELECT @var108 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Agent]') AND [c].[name] = N'agent_type');
    IF @var108 IS NOT NULL EXEC(N'ALTER TABLE [Agent] DROP CONSTRAINT [' + @var108 + '];');
    ALTER TABLE [Agent] ALTER COLUMN [agent_type] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203064708_IncreaseLenghtOfAgentType'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241203064708_IncreaseLenghtOfAgentType', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var109 sysname;
    SELECT @var109 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'company_id');
    IF @var109 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var109 + '];');
    ALTER TABLE [PoHeaders] DROP COLUMN [company_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var110 sysname;
    SELECT @var110 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListHeaders]') AND [c].[name] = N'asn_header_id');
    IF @var110 IS NOT NULL EXEC(N'ALTER TABLE [PackingListHeaders] DROP CONSTRAINT [' + @var110 + '];');
    ALTER TABLE [PackingListHeaders] DROP COLUMN [asn_header_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var111 sysname;
    SELECT @var111 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PackingListDetails]') AND [c].[name] = N'asn_detail_id');
    IF @var111 IS NOT NULL EXEC(N'ALTER TABLE [PackingListDetails] DROP CONSTRAINT [' + @var111 + '];');
    ALTER TABLE [PackingListDetails] DROP COLUMN [asn_detail_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var112 sysname;
    SELECT @var112 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'branch_plant_id');
    IF @var112 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var112 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [branch_plant_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var113 sysname;
    SELECT @var113 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'cargo_ready_date');
    IF @var113 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var113 + '];');
    ALTER TABLE [InboundShipments] DROP COLUMN [cargo_ready_date];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var114 sysname;
    SELECT @var114 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'branch_plant_id');
    IF @var114 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var114 + '];');
    ALTER TABLE [InboundShipmentRequests] DROP COLUMN [branch_plant_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var115 sysname;
    SELECT @var115 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentBLAWBs]') AND [c].[name] = N'supplier_id');
    IF @var115 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentBLAWBs] DROP CONSTRAINT [' + @var115 + '];');
    ALTER TABLE [InboundShipmentBLAWBs] DROP COLUMN [supplier_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var116 sysname;
    SELECT @var116 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'invoice_amt');
    IF @var116 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var116 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [invoice_amt];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var117 sysname;
    SELECT @var117 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'invoice_currency_id');
    IF @var117 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var117 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [invoice_currency_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var118 sysname;
    SELECT @var118 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'invoice_exchange_rate');
    IF @var118 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var118 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [invoice_exchange_rate];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var119 sysname;
    SELECT @var119 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'invoice_no');
    IF @var119 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var119 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [invoice_no];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var120 sysname;
    SELECT @var120 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'total_asn_amt');
    IF @var120 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var120 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [total_asn_amt];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var121 sysname;
    SELECT @var121 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'total_gross_weight');
    IF @var121 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var121 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [total_gross_weight];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var122 sysname;
    SELECT @var122 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'total_packages');
    IF @var122 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var122 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [total_packages];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var123 sysname;
    SELECT @var123 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'variance_reason');
    IF @var123 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var123 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [variance_reason];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var124 sysname;
    SELECT @var124 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'volume');
    IF @var124 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var124 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [volume];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var125 sysname;
    SELECT @var125 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'extended_cost');
    IF @var125 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var125 + '];');
    ALTER TABLE [AsnDetails] DROP COLUMN [extended_cost];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var126 sysname;
    SELECT @var126 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'po_detail_id');
    IF @var126 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var126 + '];');
    ALTER TABLE [AsnDetails] DROP COLUMN [po_detail_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var127 sysname;
    SELECT @var127 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'unit_cost');
    IF @var127 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var127 + '];');
    ALTER TABLE [AsnDetails] DROP COLUMN [unit_cost];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[Supplier].[inco_term]', N'incoterm', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[PoHeaders].[issuing_branch_plant_id]', N'branch_plant_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[PoHeaders].[inco_terms]', N'incoterm', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[PoHeaders].[forwarder_id]', N'forwarder_agent_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[PoHeaders].[collection_date]', N'collection_date_time', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[PoDetails].[ship_to_bp_id]', N'ship_to_branch_plant_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    EXEC sp_rename N'[PoDetails].[collection_date]', N'collection_date_time', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var128 sysname;
    SELECT @var128 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'total_amt_foreign');
    IF @var128 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var128 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [total_amt_foreign] decimal(13,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var129 sysname;
    SELECT @var129 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'total_amt_base');
    IF @var129 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var129 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [total_amt_base] decimal(13,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var130 sysname;
    SELECT @var130 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'requested_date');
    IF @var130 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var130 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [requested_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var131 sysname;
    SELECT @var131 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'quoted_ex_fac_date_latest');
    IF @var131 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var131 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [quoted_ex_fac_date_latest] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var132 sysname;
    SELECT @var132 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'quoted_ex_fac_date_earliest');
    IF @var132 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var132 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [quoted_ex_fac_date_earliest] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var133 sysname;
    SELECT @var133 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'forecast_ex_wh_date');
    IF @var133 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var133 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [forecast_ex_wh_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var134 sysname;
    SELECT @var134 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoHeaders]') AND [c].[name] = N'ack_ex_fac_date');
    IF @var134 IS NOT NULL EXEC(N'ALTER TABLE [PoHeaders] DROP CONSTRAINT [' + @var134 + '];');
    ALTER TABLE [PoHeaders] ALTER COLUMN [ack_ex_fac_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var135 sysname;
    SELECT @var135 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'unit_discount');
    IF @var135 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var135 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [unit_discount] decimal(11,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var136 sysname;
    SELECT @var136 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'unit_cost');
    IF @var136 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var136 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [unit_cost] decimal(11,4) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var137 sysname;
    SELECT @var137 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'requested_date');
    IF @var137 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var137 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [requested_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var138 sysname;
    SELECT @var138 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'quoted_ex_fac_date_latest');
    IF @var138 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var138 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [quoted_ex_fac_date_latest] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var139 sysname;
    SELECT @var139 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'quoted_ex_fac_date_earliest');
    IF @var139 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var139 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [quoted_ex_fac_date_earliest] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var140 sysname;
    SELECT @var140 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'forecast_ex_wh_date');
    IF @var140 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var140 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [forecast_ex_wh_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var141 sysname;
    SELECT @var141 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'extended_cost');
    IF @var141 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var141 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [extended_cost] decimal(13,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var142 sysname;
    SELECT @var142 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PoDetails]') AND [c].[name] = N'ack_ex_fac_date');
    IF @var142 IS NOT NULL EXEC(N'ALTER TABLE [PoDetails] DROP CONSTRAINT [' + @var142 + '];');
    ALTER TABLE [PoDetails] ALTER COLUMN [ack_ex_fac_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    ALTER TABLE [Lov] ADD [description] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    ALTER TABLE [Item] ADD [inspection_instruction] nvarchar(1024) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    ALTER TABLE [Item] ADD [item_uom_conversion_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    ALTER TABLE [Item] ADD [label_required_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    ALTER TABLE [Item] ADD [lot_control_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var143 sysname;
    SELECT @var143 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'port_of_loading_etd');
    IF @var143 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var143 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [port_of_loading_etd] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var144 sysname;
    SELECT @var144 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'port_of_discharge_eta');
    IF @var144 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var144 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [port_of_discharge_eta] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var145 sysname;
    SELECT @var145 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipments]') AND [c].[name] = N'notice_of_arrival_date');
    IF @var145 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipments] DROP CONSTRAINT [' + @var145 + '];');
    ALTER TABLE [InboundShipments] ALTER COLUMN [notice_of_arrival_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var146 sysname;
    SELECT @var146 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'port_of_loading_etd');
    IF @var146 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var146 + '];');
    ALTER TABLE [InboundShipmentRequests] ALTER COLUMN [port_of_loading_etd] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var147 sysname;
    SELECT @var147 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'port_of_discharge_eta');
    IF @var147 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var147 + '];');
    ALTER TABLE [InboundShipmentRequests] ALTER COLUMN [port_of_discharge_eta] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var148 sysname;
    SELECT @var148 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'cargo_ready_date');
    IF @var148 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var148 + '];');
    ALTER TABLE [InboundShipmentRequests] ALTER COLUMN [cargo_ready_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var149 sysname;
    SELECT @var149 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InboundShipmentRequests]') AND [c].[name] = N'cargo_description');
    IF @var149 IS NOT NULL EXEC(N'ALTER TABLE [InboundShipmentRequests] DROP CONSTRAINT [' + @var149 + '];');
    ALTER TABLE [InboundShipmentRequests] ALTER COLUMN [cargo_description] nvarchar(50) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var150 sysname;
    SELECT @var150 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CurrencyExchange]') AND [c].[name] = N'exchange_rate');
    IF @var150 IS NOT NULL EXEC(N'ALTER TABLE [CurrencyExchange] DROP CONSTRAINT [' + @var150 + '];');
    ALTER TABLE [CurrencyExchange] ALTER COLUMN [exchange_rate] decimal(13,7) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var151 sysname;
    SELECT @var151 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Company]') AND [c].[name] = N'intercompany_flag');
    IF @var151 IS NOT NULL EXEC(N'ALTER TABLE [Company] DROP CONSTRAINT [' + @var151 + '];');
    ALTER TABLE [Company] ALTER COLUMN [intercompany_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var152 sysname;
    SELECT @var152 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Company]') AND [c].[name] = N'dormant_flag');
    IF @var152 IS NOT NULL EXEC(N'ALTER TABLE [Company] DROP CONSTRAINT [' + @var152 + '];');
    ALTER TABLE [Company] ALTER COLUMN [dormant_flag] bit NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var153 sysname;
    SELECT @var153 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'received_date');
    IF @var153 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var153 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [received_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var154 sysname;
    SELECT @var154 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'forecast_ex_wh_date');
    IF @var154 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var154 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [forecast_ex_wh_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    DECLARE @var155 sysname;
    SELECT @var155 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'estimated_putaway_date');
    IF @var155 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var155 + '];');
    ALTER TABLE [AsnHeaders] ALTER COLUMN [estimated_putaway_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241203161107_UpdateForInvoice'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241203161107_UpdateForInvoice', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241204064142_CustomviewDeleteFlagRenameToAllowUpdateDeleteFlag'
)
BEGIN
    EXEC sp_rename N'[CustomView].[allow_delete_flag]', N'allow_update_delete_flag', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241204064142_CustomviewDeleteFlagRenameToAllowUpdateDeleteFlag'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241204064142_CustomviewDeleteFlagRenameToAllowUpdateDeleteFlag', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241205014734_AddInvoiceTable'
)
BEGIN
    CREATE TABLE [InvoiceDetails] (
        [id] int NOT NULL IDENTITY,
        [invoice_header_id] int NOT NULL,
        [line_no] int NOT NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [po_detail_id] int NOT NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [unit_cost] decimal(11,4) NOT NULL,
        [extended_cost] decimal(13,4) NOT NULL,
        [country_of_origin_id] int NULL,
        [notes_to_warehouse] nvarchar(255) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InvoiceDetails] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241205014734_AddInvoiceTable'
)
BEGIN
    CREATE TABLE [InvoiceHeaders] (
        [id] int NOT NULL IDENTITY,
        [asn_header_id] int NOT NULL,
        [invoice_no] nvarchar(20) NULL,
        [status_flag] nvarchar(2) NOT NULL,
        [currency_id] int NOT NULL,
        [amt] decimal(9,2) NOT NULL,
        [total_amt] decimal(11,2) NOT NULL,
        [exchange_rate] decimal(13,7) NULL,
        [total_packages] int NULL,
        [total_gross_weight] decimal(8,2) NULL,
        [volume] decimal(8,2) NULL,
        [variance_reason] nvarchar(1024) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InvoiceHeaders] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241205014734_AddInvoiceTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241205014734_AddInvoiceTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241205035856_AddUOMForInvoiceDetail'
)
BEGIN
    ALTER TABLE [InvoiceDetails] ADD [uom] nvarchar(5) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241205035856_AddUOMForInvoiceDetail'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241205035856_AddUOMForInvoiceDetail', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241206064245_RemoveFullFlagFromCustomview'
)
BEGIN
    DECLARE @var156 sysname;
    SELECT @var156 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomView]') AND [c].[name] = N'full_flag');
    IF @var156 IS NOT NULL EXEC(N'ALTER TABLE [CustomView] DROP CONSTRAINT [' + @var156 + '];');
    ALTER TABLE [CustomView] DROP COLUMN [full_flag];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241206064245_RemoveFullFlagFromCustomview'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241206064245_RemoveFullFlagFromCustomview', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212035247_updateReceivingHeader'
)
BEGIN
    DECLARE @var157 sysname;
    SELECT @var157 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingHeaders]') AND [c].[name] = N'receiving_from_document_type');
    IF @var157 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingHeaders] DROP CONSTRAINT [' + @var157 + '];');
    ALTER TABLE [ReceivingHeaders] DROP COLUMN [receiving_from_document_type];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212035247_updateReceivingHeader'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241212035247_updateReceivingHeader', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var158 sysname;
    SELECT @var158 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'default_currency');
    IF @var158 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var158 + '];');
    ALTER TABLE [Supplier] DROP COLUMN [default_currency];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var159 sysname;
    SELECT @var159 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'po_sending_method');
    IF @var159 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var159 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [po_sending_method] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var160 sysname;
    SELECT @var160 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'payment_term');
    IF @var160 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var160 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [payment_term] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var161 sysname;
    SELECT @var161 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'payment_method');
    IF @var161 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var161 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [payment_method] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var162 sysname;
    SELECT @var162 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'landed_cost_rule');
    IF @var162 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var162 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [landed_cost_rule] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var163 sysname;
    SELECT @var163 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'incoterm');
    IF @var163 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var163 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [incoterm] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    DECLARE @var164 sysname;
    SELECT @var164 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Supplier]') AND [c].[name] = N'default_freight_method');
    IF @var164 IS NOT NULL EXEC(N'ALTER TABLE [Supplier] DROP CONSTRAINT [' + @var164 + '];');
    ALTER TABLE [Supplier] ALTER COLUMN [default_freight_method] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    ALTER TABLE [Supplier] ADD [default_currency_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241212091547_UpdateSupplierTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241212091547_UpdateSupplierTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213030329_add_RevenueCenters_Costcenters'
)
BEGIN
    CREATE TABLE [CostCenters] (
        [id] int NOT NULL IDENTITY,
        [cost_center_code] int NOT NULL,
        [cost_center_description] int NOT NULL,
        [parent_group_id] int NOT NULL,
        [status_flag] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CostCenters] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213030329_add_RevenueCenters_Costcenters'
)
BEGIN
    CREATE TABLE [RevenueCenters] (
        [id] int NOT NULL IDENTITY,
        [revenue_center_code] int NOT NULL,
        [revenue_center_description] int NOT NULL,
        [parent_group_id] int NOT NULL,
        [status_flag] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_RevenueCenters] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213030329_add_RevenueCenters_Costcenters'
)
BEGIN
    CREATE UNIQUE INDEX [IX_CostCenters_cost_center_code] ON [CostCenters] ([cost_center_code]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213030329_add_RevenueCenters_Costcenters'
)
BEGIN
    CREATE UNIQUE INDEX [IX_RevenueCenters_revenue_center_code] ON [RevenueCenters] ([revenue_center_code]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213030329_add_RevenueCenters_Costcenters'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241213030329_add_RevenueCenters_Costcenters', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213071027_UpdatePoHeaderTableAddnewFlag'
)
BEGIN
    ALTER TABLE [PoHeaders] ADD [attachment_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213071027_UpdatePoHeaderTableAddnewFlag'
)
BEGIN
    ALTER TABLE [PoHeaders] ADD [notes_to_warehouse_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213071027_UpdatePoHeaderTableAddnewFlag'
)
BEGIN
    ALTER TABLE [PoHeaders] ADD [total_line_discount] decimal(13,4) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241213071027_UpdatePoHeaderTableAddnewFlag'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241213071027_UpdatePoHeaderTableAddnewFlag', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216012033_Amend_CostCenter'
)
BEGIN
    DECLARE @var165 sysname;
    SELECT @var165 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CostCenters]') AND [c].[name] = N'status_flag');
    IF @var165 IS NOT NULL EXEC(N'ALTER TABLE [CostCenters] DROP CONSTRAINT [' + @var165 + '];');
    ALTER TABLE [CostCenters] ALTER COLUMN [status_flag] nvarchar(1) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216012033_Amend_CostCenter'
)
BEGIN
    DECLARE @var166 sysname;
    SELECT @var166 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CostCenters]') AND [c].[name] = N'cost_center_description');
    IF @var166 IS NOT NULL EXEC(N'ALTER TABLE [CostCenters] DROP CONSTRAINT [' + @var166 + '];');
    ALTER TABLE [CostCenters] ALTER COLUMN [cost_center_description] nvarchar(255) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216012033_Amend_CostCenter'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241216012033_Amend_CostCenter', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216013354_amend_cost_center_code_type'
)
BEGIN
    DROP INDEX [IX_CostCenters_cost_center_code] ON [CostCenters];
    DECLARE @var167 sysname;
    SELECT @var167 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CostCenters]') AND [c].[name] = N'cost_center_code');
    IF @var167 IS NOT NULL EXEC(N'ALTER TABLE [CostCenters] DROP CONSTRAINT [' + @var167 + '];');
    ALTER TABLE [CostCenters] ALTER COLUMN [cost_center_code] nvarchar(4) NOT NULL;
    CREATE UNIQUE INDEX [IX_CostCenters_cost_center_code] ON [CostCenters] ([cost_center_code]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216013354_amend_cost_center_code_type'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241216013354_amend_cost_center_code_type', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216021737_ammend_RevenueCenter'
)
BEGIN
    DECLARE @var168 sysname;
    SELECT @var168 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[RevenueCenters]') AND [c].[name] = N'status_flag');
    IF @var168 IS NOT NULL EXEC(N'ALTER TABLE [RevenueCenters] DROP CONSTRAINT [' + @var168 + '];');
    ALTER TABLE [RevenueCenters] ALTER COLUMN [status_flag] nvarchar(1) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216021737_ammend_RevenueCenter'
)
BEGIN
    DECLARE @var169 sysname;
    SELECT @var169 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[RevenueCenters]') AND [c].[name] = N'revenue_center_description');
    IF @var169 IS NOT NULL EXEC(N'ALTER TABLE [RevenueCenters] DROP CONSTRAINT [' + @var169 + '];');
    ALTER TABLE [RevenueCenters] ALTER COLUMN [revenue_center_description] nvarchar(255) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216021737_ammend_RevenueCenter'
)
BEGIN
    DROP INDEX [IX_RevenueCenters_revenue_center_code] ON [RevenueCenters];
    DECLARE @var170 sysname;
    SELECT @var170 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[RevenueCenters]') AND [c].[name] = N'revenue_center_code');
    IF @var170 IS NOT NULL EXEC(N'ALTER TABLE [RevenueCenters] DROP CONSTRAINT [' + @var170 + '];');
    ALTER TABLE [RevenueCenters] ALTER COLUMN [revenue_center_code] nvarchar(3) NOT NULL;
    CREATE UNIQUE INDEX [IX_RevenueCenters_revenue_center_code] ON [RevenueCenters] ([revenue_center_code]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241216021737_ammend_RevenueCenter'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241216021737_ammend_RevenueCenter', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    DROP INDEX [IX_Containers_inbound_shipment_blawb_id_container_no] ON [Containers];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    DECLARE @var171 sysname;
    SELECT @var171 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'inbound_shipment_id');
    IF @var171 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var171 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [inbound_shipment_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    DECLARE @var172 sysname;
    SELECT @var172 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnHeaders]') AND [c].[name] = N'inbound_shipment_request_id');
    IF @var172 IS NOT NULL EXEC(N'ALTER TABLE [AsnHeaders] DROP CONSTRAINT [' + @var172 + '];');
    ALTER TABLE [AsnHeaders] DROP COLUMN [inbound_shipment_request_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    DECLARE @var173 sysname;
    SELECT @var173 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'received_qty');
    IF @var173 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var173 + '];');
    ALTER TABLE [AsnDetails] DROP COLUMN [received_qty];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    EXEC sp_rename N'[Containers].[inbound_shipment_blawb_id]', N'receiving_header_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    EXEC sp_rename N'[AsnHeaders].[shipment_arranged_supplier_flag]', N'notes_to_warehouse_flag', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    ALTER TABLE [Containers] ADD [asn_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [attachment_flag] bit NOT NULL DEFAULT CAST(0 AS bit);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    ALTER TABLE [AsnDetails] ADD [po_detail_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    CREATE TABLE [PackingList] (
        [id] int NOT NULL IDENTITY,
        [container_id] int NOT NULL,
        [asn_detail_id] int NOT NULL,
        [package_no] nvarchar(50) NULL,
        [mixed_carton_no] nvarchar(50) NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [country_of_origin_id] int NULL,
        [no_of_carton] int NULL,
        [unit_per_carton] int NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PackingList] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    CREATE INDEX [IX_Containers_container_no] ON [Containers] ([container_no]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223074058_AddPackingList'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241223074058_AddPackingList', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223075252_updateReceivingAndPackingList'
)
BEGIN
    DECLARE @var174 sysname;
    SELECT @var174 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingHeaders]') AND [c].[name] = N'container_id');
    IF @var174 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingHeaders] DROP CONSTRAINT [' + @var174 + '];');
    ALTER TABLE [ReceivingHeaders] DROP COLUMN [container_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223075252_updateReceivingAndPackingList'
)
BEGIN
    DECLARE @var175 sysname;
    SELECT @var175 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingDetails]') AND [c].[name] = N'asn_detail_id');
    IF @var175 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingDetails] DROP CONSTRAINT [' + @var175 + '];');
    ALTER TABLE [ReceivingDetails] DROP COLUMN [asn_detail_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223075252_updateReceivingAndPackingList'
)
BEGIN
    ALTER TABLE [ReceivingHeaders] ADD [released_by] nvarchar(50) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223075252_updateReceivingAndPackingList'
)
BEGIN
    CREATE TABLE [PackingLists] (
        [id] int NOT NULL IDENTITY,
        [container_id] int NOT NULL,
        [asn_detail_id] int NOT NULL,
        [package_no] nvarchar(50) NULL,
        [mixed_carton_no] nvarchar(50) NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [country_of_origin_id] int NULL,
        [no_of_carton] int NULL,
        [unit_per_carton] int NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PackingLists] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223075252_updateReceivingAndPackingList'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241223075252_updateReceivingAndPackingList', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223083214_removePackingListHeaderAndDetail'
)
BEGIN
    DROP TABLE [PackingListDetails];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223083214_removePackingListHeaderAndDetail'
)
BEGIN
    DROP TABLE [PackingListHeaders];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241223083214_removePackingListHeaderAndDetail'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241223083214_removePackingListHeaderAndDetail', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226010909_add_Natural_Account'
)
BEGIN
    CREATE TABLE [NaturalAccounts] (
        [id] int NOT NULL IDENTITY,
        [natural_account_code] nvarchar(6) NOT NULL,
        [natural_account_description] nvarchar(255) NOT NULL,
        [natural_account_type] nvarchar(50) NOT NULL,
        [parent_group_id] int NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_NaturalAccounts] PRIMARY KEY ([id]),
        CONSTRAINT [CK_NaturalAccount_NaturalAccountType] CHECK (natural_account_type IN ('AS', 'LB', 'SE', 'PL'))
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226010909_add_Natural_Account'
)
BEGIN
    CREATE UNIQUE INDEX [IX_NaturalAccounts_natural_account_code] ON [NaturalAccounts] ([natural_account_code]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226010909_add_Natural_Account'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241226010909_add_Natural_Account', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var176 sysname;
    SELECT @var176 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'exchange_rate');
    IF @var176 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var176 + '];');
    ALTER TABLE [InvoiceHeaders] DROP COLUMN [exchange_rate];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var177 sysname;
    SELECT @var177 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'total_gross_weight');
    IF @var177 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var177 + '];');
    ALTER TABLE [InvoiceHeaders] DROP COLUMN [total_gross_weight];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var178 sysname;
    SELECT @var178 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'volume');
    IF @var178 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var178 + '];');
    ALTER TABLE [InvoiceHeaders] DROP COLUMN [volume];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var179 sysname;
    SELECT @var179 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceDetails]') AND [c].[name] = N'item_id');
    IF @var179 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceDetails] DROP CONSTRAINT [' + @var179 + '];');
    ALTER TABLE [InvoiceDetails] DROP COLUMN [item_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var180 sysname;
    SELECT @var180 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceDetails]') AND [c].[name] = N'notes_to_warehouse');
    IF @var180 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceDetails] DROP CONSTRAINT [' + @var180 + '];');
    ALTER TABLE [InvoiceDetails] DROP COLUMN [notes_to_warehouse];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var181 sysname;
    SELECT @var181 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceDetails]') AND [c].[name] = N'status_flag');
    IF @var181 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceDetails] DROP CONSTRAINT [' + @var181 + '];');
    ALTER TABLE [InvoiceDetails] DROP COLUMN [status_flag];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var182 sysname;
    SELECT @var182 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceDetails]') AND [c].[name] = N'uom');
    IF @var182 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceDetails] DROP CONSTRAINT [' + @var182 + '];');
    ALTER TABLE [InvoiceDetails] DROP COLUMN [uom];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    EXEC sp_rename N'[InvoiceHeaders].[total_packages]', N'receiving_header_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    EXEC sp_rename N'[InvoiceDetails].[unit_cost]', N'unit_price', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    EXEC sp_rename N'[InvoiceDetails].[extended_cost]', N'total_price', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var183 sysname;
    SELECT @var183 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'total_amt');
    IF @var183 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var183 + '];');
    ALTER TABLE [InvoiceHeaders] ALTER COLUMN [total_amt] decimal(13,4) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var184 sysname;
    SELECT @var184 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'invoice_no');
    IF @var184 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var184 + '];');
    ALTER TABLE [InvoiceHeaders] ALTER COLUMN [invoice_no] nvarchar(max) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var185 sysname;
    SELECT @var185 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'asn_header_id');
    IF @var185 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var185 + '];');
    ALTER TABLE [InvoiceHeaders] ALTER COLUMN [asn_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    DECLARE @var186 sysname;
    SELECT @var186 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[InvoiceHeaders]') AND [c].[name] = N'amt');
    IF @var186 IS NOT NULL EXEC(N'ALTER TABLE [InvoiceHeaders] DROP CONSTRAINT [' + @var186 + '];');
    ALTER TABLE [InvoiceHeaders] ALTER COLUMN [amt] decimal(11,4) NOT NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    ALTER TABLE [InvoiceHeaders] ADD [branch_plant_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    ALTER TABLE [InvoiceHeaders] ADD [supplier_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    ALTER TABLE [InvoiceDetails] ADD [exchange_rate] decimal(13,7) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    CREATE TABLE [InvoiceFiles] (
        [id] int NOT NULL IDENTITY,
        [invoice_header_id] int NOT NULL,
        [file_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InvoiceFiles] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241226072647_UpdateInvoiceForASN'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241226072647_UpdateInvoiceForASN', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241227083625_UpdatePackingListForAsn'
)
BEGIN
    DECLARE @var187 sysname;
    SELECT @var187 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'detention_date');
    IF @var187 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var187 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [detention_date] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241227083625_UpdatePackingListForAsn'
)
BEGIN
    ALTER TABLE [AsnDetails] ADD [packing_list_qty] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241227083625_UpdatePackingListForAsn'
)
BEGIN
    CREATE TABLE [ASNPackingList] (
        [id] int NOT NULL IDENTITY,
        [asn_header_id] int NOT NULL,
        [item_id] int NOT NULL,
        [country_of_origin_id] int NULL,
        [asn_qty] int NOT NULL,
        [packing_list_qty] int NOT NULL,
        [uom] nvarchar(max) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ASNPackingList] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241227083625_UpdatePackingListForAsn'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241227083625_UpdatePackingListForAsn', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241230053445_updateReceiving'
)
BEGIN
    DECLARE @var188 sysname;
    SELECT @var188 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingHeaders]') AND [c].[name] = N'released_by');
    IF @var188 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingHeaders] DROP CONSTRAINT [' + @var188 + '];');
    ALTER TABLE [ReceivingHeaders] DROP COLUMN [released_by];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241230053445_updateReceiving'
)
BEGIN
    ALTER TABLE [ReceivingHeaders] ADD [asn_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241230053445_updateReceiving'
)
BEGIN
    ALTER TABLE [ReceivingHeaders] ADD [inspection_due_date] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20241230053445_updateReceiving'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20241230053445_updateReceiving', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    DROP TABLE [PackingLists];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    DECLARE @var189 sysname;
    SELECT @var189 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ReceivingHeaders]') AND [c].[name] = N'asn_header_id');
    IF @var189 IS NOT NULL EXEC(N'ALTER TABLE [ReceivingHeaders] DROP CONSTRAINT [' + @var189 + '];');
    ALTER TABLE [ReceivingHeaders] DROP COLUMN [asn_header_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    DECLARE @var190 sysname;
    SELECT @var190 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'asn_header_id');
    IF @var190 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var190 + '];');
    ALTER TABLE [Containers] DROP COLUMN [asn_header_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    EXEC sp_rename N'[Containers].[shipment_type]', N'container_type', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    ALTER TABLE [ReceivingDetails] ADD [asn_detail_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    ALTER TABLE [ReceivingDetails] ADD [packing_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    CREATE TABLE [ContainerASNs] (
        [id] int NOT NULL IDENTITY,
        [asn_header_id] int NOT NULL,
        [container_id] int NOT NULL,
        [packing_list_no] nvarchar(25) NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ContainerASNs] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    CREATE TABLE [PackingDetails] (
        [id] int NOT NULL IDENTITY,
        [packing_header_id] int NOT NULL,
        [asn_detail_id] int NOT NULL,
        [package_no] nvarchar(50) NULL,
        [mixed_carton_no] nvarchar(50) NULL,
        [item_id] int NOT NULL,
        [qty] int NOT NULL,
        [country_of_origin_id] int NULL,
        [no_of_carton] int NULL,
        [unit_per_carton] int NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PackingDetails] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    CREATE TABLE [PackingHeaders] (
        [id] int NOT NULL IDENTITY,
        [container_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_PackingHeaders] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    CREATE TABLE [ReceivingASNs] (
        [id] int NOT NULL IDENTITY,
        [receiving_HEADER_id] int NOT NULL,
        [asn_header_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ReceivingASNs] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082052_updateReceivingContainerASNPackingList'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250102082052_updateReceivingContainerASNPackingList', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082214_updateContainer'
)
BEGIN
    ALTER TABLE [Containers] ADD [shipment_type] nvarchar(1) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102082214_updateContainer'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250102082214_updateContainer', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102090950_updateRecevingASN'
)
BEGIN
    EXEC sp_rename N'[ReceivingASNs].[receiving_HEADER_id]', N'receiving_header_id', N'COLUMN';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250102090950_updateRecevingASN'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250102090950_updateRecevingASN', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250103111436_AddInvoiceDate'
)
BEGIN
    ALTER TABLE [InvoiceHeaders] ADD [invoice_date] date NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250103111436_AddInvoiceDate'
)
BEGIN
    DECLARE @var191 sysname;
    SELECT @var191 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'detention_date');
    IF @var191 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var191 + '];');
    ALTER TABLE [Containers] ALTER COLUMN [detention_date] datetime2 NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250103111436_AddInvoiceDate'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250103111436_AddInvoiceDate', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader'
)
BEGIN
    DROP TABLE [ASNPackingList];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader'
)
BEGIN
    DROP TABLE [PackingList];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader'
)
BEGIN
    ALTER TABLE [PackingHeaders] ADD [asn_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader'
)
BEGIN
    DECLARE @var192 sysname;
    SELECT @var192 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AsnDetails]') AND [c].[name] = N'po_detail_id');
    IF @var192 IS NOT NULL EXEC(N'ALTER TABLE [AsnDetails] DROP CONSTRAINT [' + @var192 + '];');
    EXEC(N'UPDATE [AsnDetails] SET [po_detail_id] = 0 WHERE [po_detail_id] IS NULL');
    ALTER TABLE [AsnDetails] ALTER COLUMN [po_detail_id] int NOT NULL;
    ALTER TABLE [AsnDetails] ADD DEFAULT 0 FOR [po_detail_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader'
)
BEGIN
    CREATE TABLE [ASNPackingDiscrepancy] (
        [id] int NOT NULL IDENTITY,
        [asn_header_id] int NOT NULL,
        [item_id] int NOT NULL,
        [country_of_origin_id] int NULL,
        [asn_qty] int NOT NULL,
        [packing_list_qty] int NOT NULL,
        [uom] nvarchar(max) NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_ASNPackingDiscrepancy] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250106070031_AddASNPackingDiscrepancyAndUpdatePackingHeader', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114081316_add_Foreigner_Key'
)
BEGIN
    CREATE INDEX [IX_NaturalAccounts_parent_group_id] ON [NaturalAccounts] ([parent_group_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114081316_add_Foreigner_Key'
)
BEGIN
    ALTER TABLE [NaturalAccounts] ADD CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]) ON DELETE CASCADE;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114081316_add_Foreigner_Key'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250114081316_add_Foreigner_Key', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114082026_prevent_deletion_of_parent'
)
BEGIN
    ALTER TABLE [NaturalAccounts] DROP CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114082026_prevent_deletion_of_parent'
)
BEGIN
    ALTER TABLE [NaturalAccounts] ADD CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]) ON DELETE NO ACTION;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114082026_prevent_deletion_of_parent'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250114082026_prevent_deletion_of_parent', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114083307_add_foreignKey_parent_group_id'
)
BEGIN
    ALTER TABLE [NaturalAccounts] DROP CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114083307_add_foreignKey_parent_group_id'
)
BEGIN
    CREATE INDEX [IX_Group_parent_group_id] ON [Group] ([parent_group_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114083307_add_foreignKey_parent_group_id'
)
BEGIN
    ALTER TABLE [Group] ADD CONSTRAINT [FK_Group_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114083307_add_foreignKey_parent_group_id'
)
BEGIN
    ALTER TABLE [NaturalAccounts] ADD CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]) ON DELETE CASCADE;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250114083307_add_foreignKey_parent_group_id'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250114083307_add_foreignKey_parent_group_id', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    ALTER TABLE [Group] DROP CONSTRAINT [FK_Group_Group_parent_group_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    ALTER TABLE [NaturalAccounts] DROP CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    DECLARE @var193 sysname;
    SELECT @var193 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Group]') AND [c].[name] = N'status_flag');
    IF @var193 IS NOT NULL EXEC(N'ALTER TABLE [Group] DROP CONSTRAINT [' + @var193 + '];');
    ALTER TABLE [Group] ADD DEFAULT N'E' FOR [status_flag];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    EXEC(N'ALTER TABLE [Group] ADD CONSTRAINT [CK_Group_GroupType] CHECK (group_type IN (''CO'', ''NA'', ''CC'', ''RC''))');
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    EXEC(N'ALTER TABLE [Group] ADD CONSTRAINT [CK_Group_StatusFlag] CHECK (status_flag IN (''E'', ''D''))');
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    ALTER TABLE [Group] ADD CONSTRAINT [FK_Group_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]) ON DELETE NO ACTION;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    ALTER TABLE [NaturalAccounts] ADD CONSTRAINT [FK_NaturalAccounts_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]) ON DELETE NO ACTION;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115032927_GroupConfig'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250115032927_GroupConfig', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115053523_addCompanyStructure'
)
BEGIN
    CREATE TABLE [CompanyStructures] (
        [id] int NOT NULL IDENTITY,
        [company_id] int NOT NULL,
        [sequence] int NOT NULL,
        [org_no] nvarchar(50) NOT NULL,
        [org_code] nvarchar(50) NOT NULL,
        [org_description] nvarchar(100) NOT NULL,
        [status_flag] nvarchar(1) NOT NULL,
        [org_type] int NOT NULL,
        [parent_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_CompanyStructures] PRIMARY KEY ([id]),
        CONSTRAINT [CK_CompanyStructure_OrgType] CHECK (org_type IN ('1', '2', '3', '4')),
        CONSTRAINT [CK_CompanyStructure_StatusFlag] CHECK (status_flag IN ('E', 'D')),
        CONSTRAINT [FK_CompanyStructures_CompanyStructures_parent_id] FOREIGN KEY ([parent_id]) REFERENCES [CompanyStructures] ([id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_CompanyStructures_Company_company_id] FOREIGN KEY ([company_id]) REFERENCES [Company] ([id]) ON DELETE NO ACTION
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115053523_addCompanyStructure'
)
BEGIN
    CREATE INDEX [IX_CompanyStructures_company_id] ON [CompanyStructures] ([company_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115053523_addCompanyStructure'
)
BEGIN
    CREATE UNIQUE INDEX [IX_CompanyStructures_org_type_sequence] ON [CompanyStructures] ([org_type], [sequence]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115053523_addCompanyStructure'
)
BEGIN
    CREATE INDEX [IX_CompanyStructures_parent_id] ON [CompanyStructures] ([parent_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115053523_addCompanyStructure'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250115053523_addCompanyStructure', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115054504_addNullableCompanyStruct'
)
BEGIN
    DECLARE @var194 sysname;
    SELECT @var194 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CompanyStructures]') AND [c].[name] = N'parent_id');
    IF @var194 IS NOT NULL EXEC(N'ALTER TABLE [CompanyStructures] DROP CONSTRAINT [' + @var194 + '];');
    ALTER TABLE [CompanyStructures] ALTER COLUMN [parent_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115054504_addNullableCompanyStruct'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250115054504_addNullableCompanyStruct', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    ALTER TABLE [CostCenters] ADD [company_structure_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    CREATE INDEX [IX_CostCenters_company_structure_id] ON [CostCenters] ([company_structure_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    CREATE INDEX [IX_CostCenters_parent_group_id] ON [CostCenters] ([parent_group_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    EXEC(N'ALTER TABLE [CostCenters] ADD CONSTRAINT [CK_CostCenter_StatusFlag] CHECK (status_flag IN (''E'', ''D''))');
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    CREATE UNIQUE INDEX [IX_CompanyStructures_id_company_id] ON [CompanyStructures] ([id], [company_id]);
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    ALTER TABLE [CompanyStructures] ADD CONSTRAINT [FK_CompanyStructures_CostCenters_company_id] FOREIGN KEY ([company_id]) REFERENCES [CostCenters] ([id]) ON DELETE NO ACTION;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    ALTER TABLE [CostCenters] ADD CONSTRAINT [FK_CostCenters_CompanyStructures_company_structure_id] FOREIGN KEY ([company_structure_id]) REFERENCES [CompanyStructures] ([id]) ON DELETE CASCADE;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    ALTER TABLE [CostCenters] ADD CONSTRAINT [FK_CostCenters_Group_parent_group_id] FOREIGN KEY ([parent_group_id]) REFERENCES [Group] ([id]) ON DELETE CASCADE;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115085944_addCostCenterConfig'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250115085944_addCostCenterConfig', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115090812_addCostCenterConfig1'
)
BEGIN
    ALTER TABLE [CompanyStructures] DROP CONSTRAINT [FK_CompanyStructures_CostCenters_company_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250115090812_addCostCenterConfig1'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250115090812_addCostCenterConfig1', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250116055835_UpdateFileTrackingTable'
)
BEGIN
    ALTER TABLE [FilesTracking] ADD [url_path_thumbnail] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250116055835_UpdateFileTrackingTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250116055835_UpdateFileTrackingTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250116065215_ReceivingHeaderAddASNHeaderId'
)
BEGIN
    ALTER TABLE [ReceivingHeaders] ADD [asn_header_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250116065215_ReceivingHeaderAddASNHeaderId'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250116065215_ReceivingHeaderAddASNHeaderId', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250117071226_addRevenueCenter'
)
BEGIN
    ALTER TABLE [RevenueCenters] ADD [company_structure_id] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250117071226_addRevenueCenter'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250117071226_addRevenueCenter', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250117082659_RemoveReceivingASNTableRemove_receiving_header_id_from_containerTable'
)
BEGIN
    DROP TABLE [ReceivingASNs];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250117082659_RemoveReceivingASNTableRemove_receiving_header_id_from_containerTable'
)
BEGIN
    DECLARE @var195 sysname;
    SELECT @var195 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Containers]') AND [c].[name] = N'receiving_header_id');
    IF @var195 IS NOT NULL EXEC(N'ALTER TABLE [Containers] DROP CONSTRAINT [' + @var195 + '];');
    ALTER TABLE [Containers] DROP COLUMN [receiving_header_id];
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250117082659_RemoveReceivingASNTableRemove_receiving_header_id_from_containerTable'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250117082659_RemoveReceivingASNTableRemove_receiving_header_id_from_containerTable', N'8.0.7');
END;
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [asn_header_id] int NOT NULL DEFAULT 0;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [collection_address] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [hs_code] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [marking_bl] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [marking_cargo] nvarchar(255) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [shipment_type] nvarchar(1) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [total_gross_weight] decimal(8,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [total_packages] int NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [InboundShipmentRequests] ADD [volume] decimal(8,2) NULL;
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    ALTER TABLE [AsnHeaders] ADD [bl_awb_provided] nvarchar(2) NOT NULL DEFAULT N'';
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    CREATE TABLE [InboundShipmentASN] (
        [id] int NOT NULL IDENTITY,
        [inbound_shipment_id] int NOT NULL,
        [asn_header_id] int NOT NULL,
        [created_on] datetime2 NOT NULL,
        [created_by] nvarchar(50) NOT NULL,
        [last_modified_on] datetime2 NULL,
        [last_modified_by] nvarchar(50) NULL,
        CONSTRAINT [PK_InboundShipmentASN] PRIMARY KEY ([id])
    );
END;
GO

IF NOT EXISTS (
    SELECT * FROM [__EFMigrationsHistory]
    WHERE [MigrationId] = N'20250121030149_UpdateInboundShipmentForASN'
)
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20250121030149_UpdateInboundShipmentForASN', N'8.0.7');
END;
GO

COMMIT;
GO

